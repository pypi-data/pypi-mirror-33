
<!DOCTYPE html>
<html>
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
   <meta name="robots" content="NONE,NOARCHIVE" />
   <meta http-equiv="X-UA-Compatible" content="IE=edge">
   <meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">
   <title>Polemarch documentation</title>
    <link rel="stylesheet" href="_static/polemarch-style.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
   <link rel="shortcut icon" href="_static/img/logo/favicon.ico" />
    <script type="text/javascript" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/bootstrap/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="_static/js/libs/tabSignal.js"></script>
    <script type="text/javascript" src="_static/js/common.js"></script>
     <script type="text/javascript" src="_static/js/app.js"></script> 
</head>


<body class="hold-transition skin-black-light sidebar-mini">
<div id="loader-wrapper">
    <div id="loader"></div>
</div>
<div class="wrapper" >
    
    <a href="https://github.com/vstconsulting/polemarch" class="fork-me">
        <img src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png" alt="Fork me on GitHub" />
    </a>
    
    <header class="main-header">
        <!-- Logo  -->
        <a href="/" class="logo">
                    <!-- mini logo for sidebar mini 50x50 pixel -->
                    <span class="logo-mini"><span class="bg-logo-min-doc" style="margin-left: 4px;"></span></span>
                    <!-- logo for regular state and mobile devices -->
                    <span class="logo-lg logo-span-doc"><span class="bg-logo-min-doc"></span> <span class="bg-logo-doc"></span></span>
                </a>
        <!-- Header Navbar: style can be found in header.less -->
        <nav class="navbar navbar-static-top">
            <!-- Sidebar toggle button-->
            <a href="#" class="sidebar-toggle" data-toggle="offcanvas" role="button">
                <span class="sr-only">Toggle navigation</span>
            </a>
            <div class="navbar-custom-menu">
                <ul class="nav navbar-nav">

                </ul>
            </div>
        </nav>
    </header>
    <!-- Left side column. contains the logo and sidebar -->
    <aside class="main-sidebar">
        <!-- sidebar: style can be found in sidebar.less -->
        <section class="sidebar">
            <!-- sidebar menu: : style can be found in sidebar.less -->
            <ul class="sidebar-menu">
                <li class="header">DOCS NAVIGATION</li>
                <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="quickstart.html">Installation and quick start</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Run from source distribution</a></li>
<li class="toctree-l1"><a class="reference internal" href="config.html">Configuration manual</a></li>
<li class="toctree-l1"><a class="reference internal" href="gui.html">GUI workflow</a></li>
<li class="toctree-l1"><a class="reference internal" href="restapi.html">Rest API</a></li>
<li class="toctree-l1"><a class="reference internal" href="contribute.html">How to participate</a></li>
<li class="toctree-l1"><a class="reference internal" href="cla.html">VST Consulting contributor agreement</a></li>
</ul>

            </ul>
            <!-- github link  -->
            
                
                <h3>Watch us on GitHub</h3>
                <p>
                <iframe src="https://ghbtns.com/github-btn.html?user=vstconsulting&repo=polemarch&type=watch&count=true&size=large&v=2"
                  allowtransparency="true" frameborder="0" scrolling="0" width="200px" height="35px"></iframe>
                </p>
                
            
            <!-- quick search -->
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" class="search-input-pm"/>
      <span class="search-button-wrapper">
          <span class="glyphicon glyphicon-search search-button-icon"></span>
          <input type="submit" value="   " class="search-button-input" />
      </span>

      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </section>
        <!-- /.sidebar -->
    </aside>

    <!-- Content Wrapper. Contains page content -->
    <div class="content-wrapper" id='spajs-right-area'>
        <!--  Main content -->

        <!-- For notification about not up-to-date-version -->
        <div class="body" role="main"></div>
        <!-- -->

        <section class="content-header">
                <h1>Polemarch documentation</h1>
        </section>
        <section class="content">
            <div class="box box-info">
                <div class="box-body">
                         
  <div class="section" id="run-from-source-distribution">
<h1>Run from source distribution<a class="headerlink" href="#run-from-source-distribution" title="Permalink to this headline">¶</a></h1>
<p>If you not satisfied with packages, provided by Polemarch because you want
to install it to system for which those packages not provided (Ubuntu 14.04,
CentOS 6, etc) or customize your installation in more wide range, you may
appreciate our source distribution. Here is simple manual how to install it.</p>
<p>We assume that you have already downloaded Polemarch distribution - file
<code class="docutils literal notranslate"><span class="pre">polemarch-X.X.X.tar.gz</span></code> placed in your home directory. But of course you
can install directly from PyPI without manually downloading package. In that
case this manual is also applicable with only one exception: use command
<code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">polemarch</span></code> at 4 stage.</p>
<ol class="arabic">
<li><p class="first"><strong>Prerequisites</strong>:</p>
<ul class="simple">
<li>Python pip installed (package <code class="docutils literal notranslate"><span class="pre">python-pip</span></code> in Ubuntu).</li>
<li>Python development headers (<code class="docutils literal notranslate"><span class="pre">python-dev</span></code> in Ubuntu).</li>
<li>Openssl development headers (<code class="docutils literal notranslate"><span class="pre">libssl-dev</span></code> in Ubuntu).</li>
<li>libffi development headers (<code class="docutils literal notranslate"><span class="pre">libffi-dev</span></code> in Ubuntu).</li>
<li>LibYAML development headers (<code class="docutils literal notranslate"><span class="pre">libyaml-dev</span></code> in Ubuntu)</li>
</ul>
<p>Optional:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">git</span></code> to get working git import.</li>
<li><code class="docutils literal notranslate"><span class="pre">sshpass</span></code> to get working ssh password auth during playbook execution.</li>
</ul>
</li>
<li><p class="first">Make sure you have latest pip and virtualenv in your system. You can do it
with those commands:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo pip install --upgrade pip
sudo pip install --upgrade virtualenv
</pre></div>
</div>
</li>
<li><p class="first">Create virtualenv for Polemarch. It is only supported method to run
Polemarch. Don’t try to install it system-wide or locally using
<code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">--user</span></code>.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>virtualenv polemarch
<span class="nb">cd</span> polemarch
<span class="nb">source</span> bin/activate
</pre></div>
</div>
</li>
<li><p class="first">Run installation:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pip install ../polemarch-X.X.X.tar.gz
</pre></div>
</div>
</li>
<li><p class="first">Now we need to create database structure for your
Polemarch installation (by default it is creates SQLite database).
Use this command right after installation and every time after update in
order to update you database schema for new version of Polemarch (you don’t
lose your old data during this process).</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>polemarchctl migrate
</pre></div>
</div>
</li>
<li><p class="first">Next part is start Polemarch web-server. Web-GUI of Polemarch works
under uWSGI web-server. Before you start it, you must customize folders in
config file, because by default our configuration suitable for .deb or
.rpm installation, not for PyPI. Copy standard config template to preferred
location and then edit it:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cp lib/python2.7/site-packages/polemarch/main/settings.ini ./
vi settings.ini
</pre></div>
</div>
<p>You must change options <code class="docutils literal notranslate"><span class="pre">static-map</span></code>, <code class="docutils literal notranslate"><span class="pre">pidfile</span></code> and <code class="docutils literal notranslate"><span class="pre">daemonize</span></code> in
<code class="docutils literal notranslate"><span class="pre">[uwsgi]</span></code> section to something like this (replace
<code class="docutils literal notranslate"><span class="pre">/home/username/polemarch</span></code> with absolute path to your virtualenv created
before):</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[uwsgi]</span>
<span class="na">static-map</span> <span class="o">=</span> <span class="s">/static=/home/username/polemarch/lib/python2.7/site-packages/polemarch/static</span>
<span class="na">pidfile</span> <span class="o">=</span> <span class="s">/tmp/polemarchweb.pid</span>
<span class="na">daemonize</span> <span class="o">=</span> <span class="s">/tmp/polemarchweb.log</span>
</pre></div>
</div>
</li>
<li><p class="first">Then we just run it with command. We use <code class="docutils literal notranslate"><span class="pre">web.ini</span></code> instead of previously
edited <code class="docutils literal notranslate"><span class="pre">settings.ini</span></code> because <code class="docutils literal notranslate"><span class="pre">web.ini</span></code> does some basic configuration
and then executes <code class="docutils literal notranslate"><span class="pre">settings.ini</span></code> (replace <code class="docutils literal notranslate"><span class="pre">/home/username/polemarch</span></code>
with absolute path to your virtualenv created before):</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span> <span class="nv">POLEMARCH_SETTINGS_FILE</span><span class="o">=</span>/home/username/polemarch/settings.ini
uwsgi ./lib/python2.7/site-packages/polemarch/web.ini
</pre></div>
</div>
<p>It will start Polemarch GUI listening at 8080 port. To stop daemon later
you can use command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>uwsgi --stop /tmp/polemarchweb.pid
</pre></div>
</div>
<p>Where path to your pid file is same, which you specified in configuration
before.</p>
</li>
<li><p class="first">And finally to make your Polemarch able to actually run jobs, you must start
at least one worker process. Because worker executes long-running tasks,
such as running jobs or cloning repositories. Without him web-gui absolutely
useless. Start it with this command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>celery -A polemarch.wapp:app worker -B -S schedule_file
</pre></div>
</div>
<p>Here <code class="docutils literal notranslate"><span class="pre">schedule_file</span></code> is path to file, which Celery will use to store info
about scheduling to run periodic tasks. You may prefer some other location
for that file.</p>
</li>
</ol>
<p>Congratulations! After all those commands if the moon and stars are in the
right position and your beard is impressive enough you end up with up and
running Polemarch installation.</p>
</div>


                </div>
            </div>
        </section>
    </div>

    
    <footer class="main-footer">
         <div class="pull-right hidden-xs">
             &copy; 2018, VST Consulting
         </div>
        <br>
    </footer>
    
</div>

</body>

</html>

