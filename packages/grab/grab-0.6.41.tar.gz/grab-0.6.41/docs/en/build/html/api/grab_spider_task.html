
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Module grab.spider.task &#8212; Grab 0.6 documentation</title>
    <link rel="stylesheet" href="../_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.6',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="prev" title="Module grab.document" href="grab_document.html" /> 
  </head>
  <body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="grab_document.html" title="Module grab.document"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Grab 0.6 documentation</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <span class="target" id="module-grab.spider.task"><span id="api-grab-task"></span></span><div class="section" id="module-grab-spider-task">
<h1>Module grab.spider.task<a class="headerlink" href="#module-grab-spider-task" title="Permalink to this headline">¶</a></h1>
<dl class="class">
<dt id="grab.spider.task.Task">
<em class="property">class </em><code class="descclassname">grab.spider.task.</code><code class="descname">Task</code><span class="sig-paren">(</span><em>name=None</em>, <em>url=None</em>, <em>grab=None</em>, <em>grab_config=None</em>, <em>priority=None</em>, <em>priority_set_explicitly=True</em>, <em>network_try_count=0</em>, <em>task_try_count=1</em>, <em>disable_cache=False</em>, <em>refresh_cache=False</em>, <em>valid_status=None</em>, <em>use_proxylist=True</em>, <em>cache_timeout=None</em>, <em>delay=None</em>, <em>raw=False</em>, <em>callback=None</em>, <em>fallback_name=None</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/grab/spider/task.html#Task"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#grab.spider.task.Task" title="Permalink to this definition">¶</a></dt>
<dd><p>Task for spider.</p>
<dl class="method">
<dt id="grab.spider.task.Task.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>name=None</em>, <em>url=None</em>, <em>grab=None</em>, <em>grab_config=None</em>, <em>priority=None</em>, <em>priority_set_explicitly=True</em>, <em>network_try_count=0</em>, <em>task_try_count=1</em>, <em>disable_cache=False</em>, <em>refresh_cache=False</em>, <em>valid_status=None</em>, <em>use_proxylist=True</em>, <em>cache_timeout=None</em>, <em>delay=None</em>, <em>raw=False</em>, <em>callback=None</em>, <em>fallback_name=None</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/grab/spider/task.html#Task.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#grab.spider.task.Task.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Create <cite>Task</cite> object.</p>
<p>If more than one of url, grab and grab_config options are non-empty
then they processed in following order:
* grab overwrite grab_config
* grab_config overwrite url</p>
<dl class="docutils">
<dt>Args:</dt>
<dd><table class="first docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">param name:</th><td class="field-body"><p class="first">name of the task. After successful network operation
task’s result will be passed to <cite>task_&lt;name&gt;</cite> method.</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">param url:</th><td class="field-body"><p class="first">URL of network document. Any task requires <cite>url</cite> or
<cite>grab</cite> option to be specified.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">param grab:</th><td class="field-body"><p class="first">configured <cite>Grab</cite> instance. You can use that option in
case when <cite>url</cite> option is not enough. Do not forget to
configure <cite>url</cite> option of <cite>Grab</cite> instance because in this case
the <cite>url</cite> option of <cite>Task</cite> constructor will be overwritten
with <cite>grab.config[‘url’]</cite>.</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">param priority:</th><td class="field-body"><ul class="first simple">
<li>priority of the Task. Tasks with lower priority</li>
</ul>
<p>will be processed earlier. By default each new task is assigned
with random priority from (80, 100) range.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">param priority_set_explicitly:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body"><ul class="first simple">
<li>internal flag which tells if that</li>
</ul>
<p>task priority was assigned manually or generated by spider
according to priority generation rules.</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">param network_try_count:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><p class="first">you’ll probably will not need to use it.
It is used internally to control how many times this task was
restarted due to network errors. The <cite>Spider</cite> instance has
<cite>network_try_limit</cite> option. When <cite>network_try_count</cite> attribute
of the task exceeds the <cite>network_try_limit</cite> attribute then
processing of the task is abandoned.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">param task_try_count:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body"><p class="first">the as <cite>network_try_count</cite> but it increased
only then you use <cite>clone</cite> method. Also you can set it manually.
It is useful if you want to restart the task after it was
cancelled due to multiple network errors. As you might guessed
there is <cite>task_try_limit</cite> option in <cite>Spider</cite> instance. Both
options <cite>network_try_count</cite> and <cite>network_try_limit</cite> guarantee
you that you’ll not get infinite loop of restarting some task.</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">param disable_cache:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><p class="first">if <cite>True</cite> disable cache subsystem.
The document will be fetched from the Network and it will not
be saved to cache.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">param refresh_cache:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body"><p class="first">if <cite>True</cite> the document will be fetched from
the Network and saved to cache.</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">param valid_status:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><p class="first">extra status codes which counts as valid</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">param use_proxylist:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body"><p class="first">it means to use proxylist which was
configured via <cite>setup_proxylist</cite> method of spider</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">param delay:</th><td class="field-body"><p class="first">if specified tells the spider to schedule the task
and execute    it after <cite>delay</cite> seconds</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">param raw:</th><td class="field-body"><p class="first">if <cite>raw</cite> is True then the network response is
forwarding to the corresponding handler without any check of
HTTP status code of network error, if <cite>raw</cite> is False (by
default) then failed response is putting back to task queue or
if tries limit is reached then the processing of this  request
is finished.</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">param callback:</th><td class="field-body"><p class="first">if you pass some function in <cite>callback</cite> option
then the network response will be passed to this callback and
the usual ‘task_*’ handler will be ignored and no error will be
raised if such ‘task_*’ handler does not exist.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">param fallback_name:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body"><p class="first last">the name of method that is called when spider
gives up to do the task (due to multiple network errors)</p>
</td>
</tr>
</tbody>
</table>
<p class="last">Any non-standard named arguments passed to <cite>Task</cite> constructor will
be saved as attributes of the object. You can get their values
later as attributes or with <cite>get</cite> method which allows to use
default value if attribute does not exist.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="grab.spider.task.Task.clone">
<code class="descname">clone</code><span class="sig-paren">(</span><em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/grab/spider/task.html#Task.clone"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#grab.spider.task.Task.clone" title="Permalink to this definition">¶</a></dt>
<dd><p>Clone Task instance.</p>
<p>Reset network_try_count, increase task_try_count.
Reset priority attribute if it was not set explicitly.</p>
</dd></dl>

<dl class="method">
<dt id="grab.spider.task.Task.get">
<code class="descname">get</code><span class="sig-paren">(</span><em>key</em>, <em>default=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/grab/spider/task.html#Task.get"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#grab.spider.task.Task.get" title="Permalink to this definition">¶</a></dt>
<dd><p>Return value of attribute or None if such attribute
does not exist.</p>
</dd></dl>

</dd></dl>

</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h4>Previous topic</h4>
  <p class="topless"><a href="grab_document.html"
                        title="previous chapter">Module grab.document</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/api/grab_spider_task.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="grab_document.html" title="Module grab.document"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Grab 0.6 documentation</a> &#187;</li> 
      </ul>
    </div>
    
    <div class="footer" role="contentinfo">
        &#169; Copyright 2015, Gregory Petukhov.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.6.3.
    </div>
    <p style="margin-top: 0; text-align: center; font-size: 0.8em;">Developed by <a href="http://grablab.io">GrabLab</a> - web scraping and data mining services.</p>
    <p style="margin-top: 0; text-align: center; font-size: 0.8em;">He also does web scraping: <a href="https://www.imscraping.ninja">www.imscraping.ninja</a>.</p>

    <!-- Yandex.Metrika counter --> <script type="text/javascript" > (function (d, w, c) { (w[c] = w[c] || []).push(function() { try { w.yaCounter13841917 = new Ya.Metrika({ id:13841917, clickmap:true, trackLinks:true, accurateTrackBounce:true }); } catch(e) { } }); var n = d.getElementsByTagName("script")[0], s = d.createElement("script"), f = function () { n.parentNode.insertBefore(s, n); }; s.type = "text/javascript"; s.async = true; s.src = "https://mc.yandex.ru/metrika/watch.js"; if (w.opera == "[object Opera]") { d.addEventListener("DOMContentLoaded", f, false); } else { f(); } })(document, window, "yandex_metrika_callbacks"); </script> <noscript><div><img src="https://mc.yandex.ru/watch/13841917" style="position:absolute; left:-9999px;" alt="" /></div></noscript> <!-- /Yandex.Metrika counter -->


  </body>
</html>