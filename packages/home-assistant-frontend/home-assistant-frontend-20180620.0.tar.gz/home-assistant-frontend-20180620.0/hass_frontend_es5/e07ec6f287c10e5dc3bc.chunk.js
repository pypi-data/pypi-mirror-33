(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{586:function(t,e,n){"use strict";n.r(e),n(102),n(50);var i,r,a=n(0),o=n(2),s=n(533),c=n.n(s),u=(n(122),n(165),n(11)),l=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),p=(i=['\n    <style include="iron-positioning"></style>\n    <style>\n    .marker {\n      vertical-align: top;\n      position: relative;\n      display: block;\n      margin: 0 auto;\n      width: 2.5em;\n      text-align: center;\n      height: 2.5em;\n      line-height: 2.5em;\n      font-size: 1.5em;\n      border-radius: 50%;\n      border: 0.1em solid var(--ha-marker-color, var(--default-primary-color));\n      color: rgb(76, 76, 76);\n      background-color: white;\n    }\n    iron-image {\n      border-radius: 50%;\n    }\n    </style>\n\n    <div class="marker">\n      <template is="dom-if" if="[[entityName]]">[[entityName]]</template>\n      <template is="dom-if" if="[[entityPicture]]">\n        <iron-image sizing="cover" class="fit" src="[[entityPicture]]"></iron-image>\n      </template>\n    </div>\n'],r=['\n    <style include="iron-positioning"></style>\n    <style>\n    .marker {\n      vertical-align: top;\n      position: relative;\n      display: block;\n      margin: 0 auto;\n      width: 2.5em;\n      text-align: center;\n      height: 2.5em;\n      line-height: 2.5em;\n      font-size: 1.5em;\n      border-radius: 50%;\n      border: 0.1em solid var(--ha-marker-color, var(--default-primary-color));\n      color: rgb(76, 76, 76);\n      background-color: white;\n    }\n    iron-image {\n      border-radius: 50%;\n    }\n    </style>\n\n    <div class="marker">\n      <template is="dom-if" if="[[entityName]]">[[entityName]]</template>\n      <template is="dom-if" if="[[entityPicture]]">\n        <iron-image sizing="cover" class="fit" src="[[entityPicture]]"></iron-image>\n      </template>\n    </div>\n'],Object.freeze(Object.defineProperties(i,{raw:{value:Object.freeze(r)}}))),d=function(t){function e(){return function(t,n){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,Object(u.a)(o.a)),l(e,[{key:"ready",value:function(){var t=this;(function t(e,n,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);if(void 0===r){var a=Object.getPrototypeOf(e);return null===a?void 0:t(a,n,i)}if("value"in r)return r.value;var o=r.get;return void 0!==o?o.call(i):void 0})(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"ready",this).call(this),this.addEventListener("click",function(e){return t.badgeTap(e)})}},{key:"badgeTap",value:function(t){t.stopPropagation(),this.entityId&&this.fire("hass-more-info",{entityId:this.entityId})}}],[{key:"template",get:function(){return Object(a.a)(p)}},{key:"properties",get:function(){return{hass:{type:Object},entityId:{type:String,value:""},entityName:{type:String,value:null},entityPicture:{type:String,value:null}}}}]),e}();customElements.define("ha-entity-marker",d);var f=n(15),m=n(16),h=n(12),y=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),b=Object.freeze(Object.defineProperties(["\n    <style include=\"ha-style\">\n      #map {\n        height: calc(100% - 64px);\n        width: 100%;\n        z-index: 0;\n      }\n    </style>\n\n    <app-toolbar>\n      <ha-menu-button narrow='[[narrow]]' show-menu='[[showMenu]]'></ha-menu-button>\n      <div main-title>[[localize('panel.map')]]</div>\n    </app-toolbar>\n\n    <div id='map'></div>\n    "],{raw:{value:Object.freeze(["\n    <style include=\"ha-style\">\n      #map {\n        height: calc(100% - 64px);\n        width: 100%;\n        z-index: 0;\n      }\n    </style>\n\n    <app-toolbar>\n      <ha-menu-button narrow='[[narrow]]' show-menu='[[showMenu]]'></ha-menu-button>\n      <div main-title>[[localize('panel.map')]]</div>\n    </app-toolbar>\n\n    <div id='map'></div>\n    "])}}));c.a.Icon.Default.imagePath="/static/images/leaflet";var v=function(t){function e(){return function(t,n){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,Object(h.a)(o.a)),y(e,[{key:"connectedCallback",value:function(){var t=this;(function t(e,n,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);if(void 0===r){var a=Object.getPrototypeOf(e);return null===a?void 0:t(a,n,i)}if("value"in r)return r.value;var o=r.get;return void 0!==o?o.call(i):void 0})(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"connectedCallback",this).call(this);var n=this._map=c.a.map(this.$.map),i=document.createElement("link");i.setAttribute("href","/static/images/leaflet/leaflet.css"),i.setAttribute("rel","stylesheet"),this.$.map.parentNode.appendChild(i),n.setView([51.505,-.09],13),c.a.tileLayer("https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}"+(c.a.Browser.retina?"@2x.png":".png"),{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>, &copy; <a href="https://carto.com/attributions">CARTO</a>',subdomains:"abcd",minZoom:0,maxZoom:20}).addTo(n),this.drawEntities(this.hass),setTimeout(function(){n.invalidateSize(),t.fitMap()},1)}},{key:"fitMap",value:function(){var t;0===this._mapItems.length?this._map.setView(new c.a.LatLng(this.hass.config.core.latitude,this.hass.config.core.longitude),14):(t=new c.a.latLngBounds(this._mapItems.map(function(t){return t.getLatLng()})),this._map.fitBounds(t.pad(.5)))}},{key:"drawEntities",value:function(t){var e=this._map;if(e){this._mapItems&&this._mapItems.forEach(function(t){t.remove()});var n=this._mapItems=[];Object.keys(t.states).forEach(function(i){var r=t.states[i],a=Object(m.a)(r);if(!(r.attributes.hidden&&"zone"!==Object(f.a)(r)||"home"===r.state)&&"latitude"in r.attributes&&"longitude"in r.attributes){var o;if("zone"===Object(f.a)(r)){if(r.attributes.passive)return;var s;return s=r.attributes.icon?"<iron-icon icon='"+r.attributes.icon+"'></iron-icon>":a,o=c.a.divIcon({html:s,iconSize:[24,24],className:""}),n.push(c.a.marker([r.attributes.latitude,r.attributes.longitude],{icon:o,interactive:!1,title:a}).addTo(e)),void n.push(c.a.circle([r.attributes.latitude,r.attributes.longitude],{interactive:!1,color:"#FF9800",radius:r.attributes.radius}).addTo(e))}var u=r.attributes.entity_picture||"",l=a.split(" ").map(function(t){return t.substr(0,1)}).join("");o=c.a.divIcon({html:"<ha-entity-marker entity-id='"+r.entity_id+"' entity-name='"+l+"' entity-picture='"+u+"'></ha-entity-marker>",iconSize:[45,45],className:""}),n.push(c.a.marker([r.attributes.latitude,r.attributes.longitude],{icon:o,title:Object(m.a)(r)}).addTo(e)),r.attributes.gps_accuracy&&n.push(c.a.circle([r.attributes.latitude,r.attributes.longitude],{interactive:!1,color:"#0288D1",radius:r.attributes.gps_accuracy}).addTo(e))}})}}}],[{key:"template",get:function(){return Object(a.a)(b)}},{key:"properties",get:function(){return{hass:{type:Object,observer:"drawEntities"},narrow:{type:Boolean},showMenu:{type:Boolean,value:!1}}}}]),e}();customElements.define("ha-panel-map",v)}}]);
//# sourceMappingURL=e07ec6f287c10e5dc3bc.chunk.js.map