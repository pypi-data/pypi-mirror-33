[tox]
envlist = 
    py27
    py34

[testenv]
deps =
    pytest>=3.0.0
whitelist_externals =
    bash
commands = 
    pytest --cache-clear \
        --ignore=tests/test_classdef.py \
        --ignore=tests/test_detect.py \
        --ignore=tests/test_diff.py \
        --ignore=tests/test_module.py \
        --ignore=tests/test_source.py \
        --ignore=tests/test_temp.py
    bash -c "failed=0; for test in tests/*.py; do echo $test; \
        python $test > /dev/null || failed=1; done; exit $failed"
