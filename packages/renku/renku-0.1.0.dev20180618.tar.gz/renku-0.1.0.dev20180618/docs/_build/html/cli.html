
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Renku Command Line &#8212; Renku 0.1.0.dev20180613 documentation</title>
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Projects" href="projects.html" />
    <link rel="prev" title="Renku CLI and SDK for Python" href="index.html" />
  
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  <link href="https://fonts.googleapis.com/css?family=Raleway:100,200,300,400,500,600,700,800,900,300italic,400italic" rel="stylesheet" type="text/css">
  <link rel="dns-prefetch" href="//fonts.googleapis.com">
  </head><body>
  <div class="git-ribbon">
    <a href="http://github.com/SwissDataScienceCenter" rel="me">Join us on GitHub</a>
  </div>
  
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="module-renku.cli">
<span id="renku-command-line"></span><h1>Renku Command Line<a class="headerlink" href="#module-renku.cli" title="Permalink to this headline">¶</a></h1>
<p>The base command for interacting with the Renku platform.</p>
<div class="section" id="renku-base-command">
<h2><code class="docutils literal notranslate"><span class="pre">renku</span></code> (base command)<a class="headerlink" href="#renku-base-command" title="Permalink to this headline">¶</a></h2>
<p>To list the available commands, either run <code class="docutils literal notranslate"><span class="pre">renku</span></code> with no parameters or
execute <code class="docutils literal notranslate"><span class="pre">renku</span> <span class="pre">help</span></code>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> renku <span class="nb">help</span>
<span class="go">Usage: renku [OPTIONS] COMMAND [ARGS]...</span>

<span class="go">Check common Renku commands used in various situations.</span>

<span class="go">Options:</span>
<span class="go">  --version            Print version number.</span>
<span class="go">  --config PATH        Location of client config files.</span>
<span class="go">  --config-path        Print application config path.</span>
<span class="go">  --path &lt;path&gt;        Location of a Renku repository.  [default: .]</span>
<span class="go">  --renku-home &lt;path&gt;  Location of Renku directory.  [default: .renku]</span>
<span class="go">  -h, --help           Show this message and exit.</span>

<span class="go">Commands:</span>
<span class="gp">  #</span> <span class="o">[</span>...<span class="o">]</span>
</pre></div>
</div>
<div class="section" id="configuration-files">
<h3>Configuration files<a class="headerlink" href="#configuration-files" title="Permalink to this headline">¶</a></h3>
<p>Depending on your system, you may find the configuration files used by Renku
command line in a different folder. By default, the following rules are used:</p>
<dl class="docutils">
<dt>MacOS:</dt>
<dd><code class="docutils literal notranslate"><span class="pre">~/Library/Application</span> <span class="pre">Support/Renku</span></code></dd>
<dt>Unix:</dt>
<dd><code class="docutils literal notranslate"><span class="pre">~/.config/renku</span></code></dd>
<dt>Windows:</dt>
<dd><code class="docutils literal notranslate"><span class="pre">C:\Users\&lt;user&gt;\AppData\Roaming\Renku</span></code></dd>
</dl>
<p>If in doubt where to look for the configuration file, you can display its path
by running <code class="docutils literal notranslate"><span class="pre">renku</span> <span class="pre">--config-path</span></code>.</p>
<p>You can specify a different location via the <code class="docutils literal notranslate"><span class="pre">RENKU_CONFIG</span></code> environment
variable or the <code class="docutils literal notranslate"><span class="pre">--config</span></code> command line option. If both are specified, then
the <code class="docutils literal notranslate"><span class="pre">--config</span></code> option value is used. For example:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> renku --config ~/renku/config/ init
</pre></div>
</div>
<p>instructs Renku to store the configuration files in your <code class="docutils literal notranslate"><span class="pre">~/renku/config/</span></code>
directory when running the <code class="docutils literal notranslate"><span class="pre">init</span></code> command.</p>
</div>
</div>
<div class="section" id="module-renku.cli.init">
<span id="renku-init"></span><span id="cli-init"></span><h2><code class="docutils literal notranslate"><span class="pre">renku</span> <span class="pre">init</span></code><a class="headerlink" href="#module-renku.cli.init" title="Permalink to this headline">¶</a></h2>
<p>Create an empty Renku project or reinitialize an existing one.</p>
<div class="section" id="starting-a-renku-project">
<h3>Starting a Renku project<a class="headerlink" href="#starting-a-renku-project" title="Permalink to this headline">¶</a></h3>
<p>If you have an existing directory which you want to turn into a Renku project,
you can type:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> <span class="nb">cd</span> ~/my_project
<span class="gp">$</span> renku init
</pre></div>
</div>
<p>or:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> renku init ~/my_project
</pre></div>
</div>
<p>This creates a new subdirectory named <code class="docutils literal notranslate"><span class="pre">.renku</span></code> that contains all the
necessary files for managing the project configuration.</p>
</div>
</div>
<div class="section" id="module-renku.cli.dataset">
<span id="renku-datasets"></span><span id="cli-datasets"></span><h2><code class="docutils literal notranslate"><span class="pre">renku</span> <span class="pre">datasets</span></code><a class="headerlink" href="#module-renku.cli.dataset" title="Permalink to this headline">¶</a></h2>
<p>Work with datasets in the current repository.</p>
<div class="section" id="manipulating-datasets">
<h3>Manipulating datasets<a class="headerlink" href="#manipulating-datasets" title="Permalink to this headline">¶</a></h3>
<p>Creating an empty dataset inside a Renku project:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> renku dataset create my-dataset
</pre></div>
</div>
<p>Adding data to the dataset:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> renku dataset add my-dataset http://data-url
</pre></div>
</div>
<p>This will copy the contents of <code class="docutils literal notranslate"><span class="pre">data-url</span></code> to the dataset and add it
to the dataset metadata.</p>
</div>
</div>
<div class="section" id="module-renku.cli.run">
<span id="renku-run"></span><span id="cli-run"></span><h2><code class="docutils literal notranslate"><span class="pre">renku</span> <span class="pre">run</span></code><a class="headerlink" href="#module-renku.cli.run" title="Permalink to this headline">¶</a></h2>
<p>Track provenance of data created by executing programs.</p>
<div class="section" id="capture-command-line-execution">
<h3>Capture command line execution<a class="headerlink" href="#capture-command-line-execution" title="Permalink to this headline">¶</a></h3>
<p>Tracking exection of your command line script is done by simply adding the
<code class="docutils literal notranslate"><span class="pre">renku</span> <span class="pre">run</span></code> command before the previous arguments. The command will detect:</p>
<ul class="simple">
<li>arguments (flags),</li>
<li>string and integer options,</li>
<li>input files if linked to existing files in the repository,</li>
<li>output files if modified or created while running the command.</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If there were uncommitted changes then the command fails.
See <strong class="program">git status</strong> for details.</p>
</div>
</div>
<div class="section" id="detecting-input-files">
<h3>Detecting input files<a class="headerlink" href="#detecting-input-files" title="Permalink to this headline">¶</a></h3>
<p>An argument is identified as an input file only if its path matches an existing
file in the repository. There might be several situations when the detection
might not work as expected:</p>
<ul class="simple">
<li>If the file is modified during the execution, then it is stored as an output;</li>
<li>If the path points to a directory, then it is stored as a string option;</li>
<li>The input file is not defined as the tool argument.</li>
</ul>
</div>
<div class="section" id="detecting-output-files">
<h3>Detecting output files<a class="headerlink" href="#detecting-output-files" title="Permalink to this headline">¶</a></h3>
<p>Any file which is modified or created after the execution will be added as an
output. If the program does not produce any outputs, you can specify the
<code class="docutils literal notranslate"><span class="pre">--no-output</span></code> option.</p>
<p>There might be situations where an existing output file has not been changed
when the command has been executed with different parameters. The execution
ends with an error: <code class="docutils literal notranslate"><span class="pre">Error:</span> <span class="pre">There</span> <span class="pre">are</span> <span class="pre">not</span> <span class="pre">any</span> <span class="pre">detected</span> <span class="pre">outputs</span> <span class="pre">in</span> <span class="pre">the</span>
<span class="pre">repository.</span></code> In order to resolve it remove any proposed input file from the
list first.</p>
</div>
<div class="section" id="detecting-standard-streams">
<h3>Detecting standard streams<a class="headerlink" href="#detecting-standard-streams" title="Permalink to this headline">¶</a></h3>
<p>Often the program expect inputs as a standard input stream. This is detected
and recorded in the tool specification when invoked by <code class="docutils literal notranslate"><span class="pre">renku</span> <span class="pre">run</span> <span class="pre">cat</span> <span class="pre">&lt;</span> <span class="pre">A</span></code>.</p>
<p>Similarly, both redirects to standard output and standard error output can be
done when invoking a command:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> renku run grep <span class="s2">&quot;test&quot;</span> B &gt; C <span class="m">2</span>&gt; D
</pre></div>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Detecting inputs and outputs from pipes <code class="docutils literal notranslate"><span class="pre">|</span></code> is not supported.</p>
</div>
</div>
</div>
<div class="section" id="module-renku.cli.log">
<span id="renku-log"></span><span id="cli-log"></span><h2><code class="docutils literal notranslate"><span class="pre">renku</span> <span class="pre">log</span></code><a class="headerlink" href="#module-renku.cli.log" title="Permalink to this headline">¶</a></h2>
<p>Show provenance of data created by executing programs.</p>
<div class="section" id="file-provenance">
<h3>File provenance<a class="headerlink" href="#file-provenance" title="Permalink to this headline">¶</a></h3>
<p>Unlike the traditional file history format, which shows previous revisions
of the file, this format presents tool inputs together with their revision
identifiers.</p>
<p>A <code class="docutils literal notranslate"><span class="pre">*</span></code> character shows to which lineage the specific file belongs to.
A <code class="docutils literal notranslate"><span class="pre">&#64;</span></code> character in the graph lineage means that the corresponding file does
not have any inputs and the history starts there.</p>
<p>When called without file names, <code class="docutils literal notranslate"><span class="pre">renku</span> <span class="pre">log</span></code> shows the history of most
recently created files. With the <code class="docutils literal notranslate"><span class="pre">--revision</span> <span class="pre">&lt;refname&gt;</span></code> option the output is
shown as it was in the specified revision.</p>
<div class="section" id="provenance-examples">
<h4>Provenance examples<a class="headerlink" href="#provenance-examples" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">renku</span> <span class="pre">log</span> <span class="pre">B</span></code></dt>
<dd>Show the history of file <code class="docutils literal notranslate"><span class="pre">B</span></code> since its last creation or modification.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">renku</span> <span class="pre">log</span> <span class="pre">--revision</span> <span class="pre">HEAD~5</span></code></dt>
<dd>Show the history of files that have been created or modified 5 commits ago.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">renku</span> <span class="pre">log</span> <span class="pre">--revision</span> <span class="pre">e3f0bd5a</span> <span class="pre">D</span> <span class="pre">E</span></code></dt>
<dd>Show the history of files <code class="docutils literal notranslate"><span class="pre">D</span></code> and <code class="docutils literal notranslate"><span class="pre">E</span></code> as it looked in the commit
<code class="docutils literal notranslate"><span class="pre">e3f0bd5a</span></code>.</dd>
</dl>
</div>
</div>
</div>
<div class="section" id="module-renku.cli.status">
<span id="renku-status"></span><span id="cli-status"></span><h2><code class="docutils literal notranslate"><span class="pre">renku</span> <span class="pre">status</span></code><a class="headerlink" href="#module-renku.cli.status" title="Permalink to this headline">¶</a></h2>
<p>Show status of data files created in the repository.</p>
<div class="section" id="inspecting-a-repository">
<h3>Inspecting a repository<a class="headerlink" href="#inspecting-a-repository" title="Permalink to this headline">¶</a></h3>
<p>Displays paths of outputs which were generated from newer inputs files
and paths of files that have been used in diverent versions.</p>
<p>The first paths are what need to be recreated by running <code class="docutils literal notranslate"><span class="pre">renku</span> <span class="pre">update</span></code>.
See more in section about <a class="reference internal" href="#cli-update"><span class="std std-ref">renku update</span></a>.</p>
<p>The paths mentioned in the output are made relative to the current directory
if you are working in a subdirectory (this is on purpose, to help
cutting and pasting to other commands). They also contain first 8 characters
of the corresponding commit identifier after the <code class="docutils literal notranslate"><span class="pre">#</span></code> (hash). If the file was
imported from another repository, the short name of is shown together with the
filename before <code class="docutils literal notranslate"><span class="pre">&#64;</span></code>.</p>
</div>
</div>
<div class="section" id="module-renku.cli.update">
<span id="renku-update"></span><span id="cli-update"></span><h2><code class="docutils literal notranslate"><span class="pre">renku</span> <span class="pre">update</span></code><a class="headerlink" href="#module-renku.cli.update" title="Permalink to this headline">¶</a></h2>
<p>Update outdated files created by the “run” command.</p>
<div class="section" id="recreating-outdated-files">
<h3>Recreating outdated files<a class="headerlink" href="#recreating-outdated-files" title="Permalink to this headline">¶</a></h3>
<p>The information about dependencies for each file in the repository is generated
from information stored in the underlying Git repository.</p>
<p>A minimal dependency graph is generated for each outdated file stored in the
repository. It means that only the necessary steps will be executed and the
workflow used to orchestrate these steps is stored in the repository.</p>
<p>Assume that the following history for the file <code class="docutils literal notranslate"><span class="pre">H</span></code> exists.</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>      C---D---E
     /         \
A---B---F---G---H
</pre></div>
</div>
<p>The first example shows situation when <code class="docutils literal notranslate"><span class="pre">D</span></code> is modified and files <code class="docutils literal notranslate"><span class="pre">E</span></code> and
<code class="docutils literal notranslate"><span class="pre">H</span></code> become outdated.</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>      C--*D*--(E)
     /          \
A---B---F---G---(H)

** - modified
() - needs update
</pre></div>
</div>
<p>In this situation, you can do efectively two things:</p>
<ul>
<li><p class="first">Recreate a single file by running</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> renku update E
</pre></div>
</div>
</li>
<li><p class="first">Update all files by simply running</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> renku update
</pre></div>
</div>
</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If there were uncommitted changes then the command fails.
Check <strong class="program">git status</strong> to see details.</p>
</div>
</div>
<div class="section" id="pre-update-checks">
<h3>Pre-update checks<a class="headerlink" href="#pre-update-checks" title="Permalink to this headline">¶</a></h3>
<p>In the next example, files <code class="docutils literal notranslate"><span class="pre">A</span></code> or <code class="docutils literal notranslate"><span class="pre">B</span></code> are modified, hence the majority
of dependent files must be recreated.</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>        (C)--(D)--(E)
       /            \
*A*--*B*--(F)--(G)--(H)
</pre></div>
</div>
<p>To avoid excesive recreation of the large portion of files which could have
been affected by a simple change of an input file, consider speficing a single
file (e.g. <code class="docutils literal notranslate"><span class="pre">renku</span> <span class="pre">update</span> <span class="pre">G</span></code>). See also <a class="reference internal" href="#cli-status"><span class="std std-ref">renku status</span></a>.</p>
</div>
</div>
<div class="section" id="module-renku.cli.workflow">
<span id="renku-workflow"></span><span id="cli-workflow"></span><h2><code class="docutils literal notranslate"><span class="pre">renku</span> <span class="pre">workflow</span></code><a class="headerlink" href="#module-renku.cli.workflow" title="Permalink to this headline">¶</a></h2>
<p>Workflow operations.</p>
</div>
<div class="section" id="module-renku.cli.show">
<span id="renku-show"></span><h2><code class="docutils literal notranslate"><span class="pre">renku</span> <span class="pre">show</span></code><a class="headerlink" href="#module-renku.cli.show" title="Permalink to this headline">¶</a></h2>
<p>Show information about objects in current repository.</p>
<div class="section" id="siblings">
<h3>Siblings<a class="headerlink" href="#siblings" title="Permalink to this headline">¶</a></h3>
<p>In situations when multiple outputs have been generated by a single
<code class="docutils literal notranslate"><span class="pre">renku</span> <span class="pre">run</span></code> command, the siblings can be discovered by running
<code class="docutils literal notranslate"><span class="pre">renku</span> <span class="pre">show</span> <span class="pre">siblings</span> <span class="pre">PATH</span></code> command.</p>
<p>Assume that the following graph represents relations in the repository.</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>      D---E---G
     /     \
A---B---C   F
</pre></div>
</div>
<p>Then the following outputs would be shown.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> renku show siblings C
<span class="go">C</span>
<span class="go">D</span>
<span class="gp">$</span> renku show siblings G
<span class="go">F</span>
<span class="go">G</span>
<span class="gp">$</span> renku show siblings A
<span class="go">A</span>
</pre></div>
</div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><p class="logo">
  <a href="index.html">
    <h1 class="logo logo-name">
      Renku
      <span class="renku">連句</span>
    </h1>
  </a>
</p>


<p class="blurb">Python API and CLI for the Renku platform.</p>








<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Renku Command Line</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#renku-base-command"><code class="docutils literal notranslate"><span class="pre">renku</span></code> (base command)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-renku.cli.init"><code class="docutils literal notranslate"><span class="pre">renku</span> <span class="pre">init</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-renku.cli.dataset"><code class="docutils literal notranslate"><span class="pre">renku</span> <span class="pre">datasets</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-renku.cli.run"><code class="docutils literal notranslate"><span class="pre">renku</span> <span class="pre">run</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-renku.cli.log"><code class="docutils literal notranslate"><span class="pre">renku</span> <span class="pre">log</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-renku.cli.status"><code class="docutils literal notranslate"><span class="pre">renku</span> <span class="pre">status</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-renku.cli.update"><code class="docutils literal notranslate"><span class="pre">renku</span> <span class="pre">update</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-renku.cli.workflow"><code class="docutils literal notranslate"><span class="pre">renku</span> <span class="pre">workflow</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-renku.cli.show"><code class="docutils literal notranslate"><span class="pre">renku</span> <span class="pre">show</span></code></a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="projects.html">Projects</a></li>
<li class="toctree-l1"><a class="reference internal" href="datasets.html">Datasets</a></li>
<li class="toctree-l1"><a class="reference internal" href="cwl.html">Tools and Workflows</a></li>
<li class="toctree-l1"><a class="reference internal" href="client.html">Client</a></li>
<li class="toctree-l1"><a class="reference internal" href="api.html">Low-level API</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="changes.html">Changes</a></li>
<li class="toctree-l1"><a class="reference internal" href="license.html">License</a></li>
<li class="toctree-l1"><a class="reference internal" href="authors.html">Authors</a></li>
</ul>


<hr />
<ul>
    
    <li class="toctree-l1"><a href="https://github.com/SwissDataScienceCenter/renku-python">renku-python@GitHub</a></li>
    
    <li class="toctree-l1"><a href="https://pypi.python.org/pypi/renku/">renku-python@PyPI</a></li>
    
    <li class="toctree-l1"><a href="https://github.com/SwissDataScienceCenter/renku">renku@GitHub</a></li>
    
</ul>
<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="index.html" title="previous chapter">Renku CLI and SDK for Python</a></li>
      <li>Next: <a href="projects.html" title="next chapter">Projects</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2017, Swiss Data Science Center.
      
      |
      <a href="_sources/cli.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>