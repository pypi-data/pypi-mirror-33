require=(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({"data_export":[function(require,module,exports){
var $=require("base/jQuery"),DataExportView=require("data_export/views").DataExportView,DataExportStateModel=require("data_export/models").DataExportStateModel;module.exports={$:$,DataExportView:DataExportView,DataExportStateModel:DataExportStateModel};
},{"base/jQuery":47,"data_export/models":25,"data_export/views":26}],26:[function(require,module,exports){
var Handlebars=require("base/handlebars"),Backbone=require("base/backbone"),$=require("base/jQuery"),Models=require("./models"),DataExportView=Backbone.View.extend({template:require("./hbtemplates/data-export-container.handlebars"),initialize:function(e){this.options=e||{},this.zone_select_view=new ZoneSelectView({org_id:e.org_id,model:this.model}),this.facility_select_view=new FacilitySelectView({model:this.model}),this.group_select_view=new GroupSelectView({model:this.model}),this.render()},events:{"click #export-button":"export_data","change #resource-id":"resource_changed"},render:function(){this.$el.html(this.template(this.model.attributes)),this.$("#student-select-container").append(this.zone_select_view.$el),this.$("#student-select-container").append(this.facility_select_view.$el),this.$("#student-select-container").append(this.group_select_view.$el)},resource_changed:function(){this.model.set({resource_id:this.$("#resource-id").val()})},resource_endpoint:function(){var e=this.model.get("resource_id");switch(e){case"facility_user":return FACILITY_USER_CSV_URL;case"test_log":return TEST_LOG_CSV_URL;case"attempt_log":return ATTEMPT_LOG_CSV_URL;case"exercise_log":return EXERCISE_LOG_CSV_URL;case"device_log":return DEVICE_LOG_CSV_URL;case"content_rating":return CONTENT_RATING_CSV_URL}},export_data:function(e){e.preventDefault();var t=this.model.get("zone_id"),i=this.model.get("facility_id"),s=this.model.get("group_id"),l=(this.resource_endpoint(),"");void 0!==t&&""!==t||(l=_.map(this.zone_select_view.zone_list.models,function(e){return e.get("id")}).join());var n="?"+$.param({group_id:s,facility_id:i,zone_id:t,zone_ids:l,format:"csv",limit:0}),o=this.resource_endpoint()+n;window.location=o}}),ZoneSelectView=Backbone.View.extend({template:require("./hbtemplates/zone-select.handlebars"),initialize:function(){this.zone_list=new Models.ZoneCollection,this.model.get("is_central")&&(this.listenTo(this.zone_list,"sync",this.render),this.zone_list.fetch({data:$.param({org_id:this.options.org_id,limit:0})})),this.render()},render:function(){var e=this.template({zones:this.zone_list.toJSON(),selection:this.model.get("zone_id")});this.model.get("is_central")?this.$el.html(e):this.$el.html(e).hide()},events:{change:"zone_changed"},zone_changed:function(e){var t=this.$("select").val();this.model.set({facility_id:void 0,group_id:void 0,zone_id:t})}}),FacilitySelectView=Backbone.View.extend({template:require("./hbtemplates/facility-select.handlebars"),initialize:function(){this.facility_list=new Models.FacilityCollection,this.listenTo(this.facility_list,"sync",this.render),this.listenTo(this.facility_list,"reset",this.render),this.listenTo(this.model,"change:resource_id",this.render),this.model.get("is_central")&&this.listenTo(this.model,"change:zone_id",this.fetch_by_zone),this.fetch_by_zone(),this.render()},render:function(){var e={facilities:this.facility_list.toJSON(),selection:this.model.get("facility_id"),is_disabled:this.is_disabled()};return this.$el.html(this.template(e)),this},is_disabled:function(){return!("device_log"!==this.model.get("resource_id")&&!window.IS_FACILITY_USER)||(void 0===this.model.get("zone_id")||""===this.model.get("zone_id"))&&this.model.get("is_central")},render_waiting:function(){var e={is_disabled:!0,loading:!0};this.$el.html(this.template(e))},events:{change:"facility_changed"},facility_changed:function(e){var t=this.$("select").val();this.model.set({group_id:void 0,facility_id:t})},fetch_by_zone:function(){if(this.model.get("is_central")){var e=this.model.get("zone_id");e?(this.render_waiting(),this.facility_list.fetch({data:$.param({zone_id:e,limit:0})})):this.facility_list.reset()}else this.render_waiting(),this.facility_list.fetch()}}),GroupSelectView=Backbone.View.extend({template:require("./hbtemplates/group-select.handlebars"),initialize:function(){this.group_list=new Models.GroupCollection,this.fetch_by_facility(),this.listenTo(this.group_list,"sync",this.render),this.listenTo(this.group_list,"reset",this.render),this.listenTo(this.model,"change:resource_id",this.render),this.listenTo(this.model,"change:facility_id",this.fetch_by_facility),this.render()},render:function(){var e={groups:this.group_list.toJSON(),selection:this.model.get("group_id"),is_disabled:this.is_disabled()};return this.$el.html(this.template(e)),this},is_disabled:function(){return"device_log"===this.model.get("resource_id")||!this.model.get("facility_id")},render_waiting:function(){var e={is_disabled:!0,loading:!0};this.$el.html(this.template(e))},events:{change:"group_changed"},group_changed:function(e){var t=this.$("select").val();this.model.set({group_id:t})},fetch_by_facility:function(){var e=this.model.get("facility_id");e?(this.render_waiting(),this.group_list.fetch({data:$.param({facility_id:e,limit:0})})):this.group_list.reset()}});module.exports={DataExportView:DataExportView,ZoneSelectView:ZoneSelectView,FacilitySelectView:FacilitySelectView,GroupSelectView:GroupSelectView};
},{"./hbtemplates/data-export-container.handlebars":21,"./hbtemplates/facility-select.handlebars":22,"./hbtemplates/group-select.handlebars":23,"./hbtemplates/zone-select.handlebars":24,"./models":25,"base/backbone":44,"base/handlebars":46,"base/jQuery":47}],25:[function(require,module,exports){
var Backbone=require("base/backbone"),ZoneModel=Backbone.Model.extend(),FacilityModel=Backbone.Model.extend(),GroupModel=Backbone.Model.extend(),DataExportStateModel=Backbone.Model.extend(),ZoneCollection=Backbone.Collection.extend({model:ZoneModel,url:ALL_ZONES_URL}),FacilityCollection=Backbone.Collection.extend({model:FacilityModel,url:ALL_FACILITIES_URL}),GroupCollection=Backbone.Collection.extend({model:GroupModel,url:ALL_GROUPS_URL});module.exports={ZoneModel:ZoneModel,FacilityModel:FacilityModel,GroupModel:GroupModel,DataExportStateModel:DataExportStateModel,ZoneCollection:ZoneCollection,FacilityCollection:FacilityCollection,GroupCollection:GroupCollection};
},{"base/backbone":44}],24:[function(require,module,exports){
var HandlebarsCompiler=require("hbsfy/runtime");module.exports=HandlebarsCompiler.template(function(a,e,l,n,o){function s(a,e,n){var o,s,t,c="";return c+='\n                <option value="',(s=l.id)?o=s.call(a,{hash:{},data:e}):(s=a&&a.id,o=typeof s===d?s.call(a,{hash:{},data:e}):s),c+=p(o)+'" ',s=l.ifcond||n&&n.ifcond,t={hash:{},inverse:f.noop,fn:f.program(2,i,e),data:e},o=s?s.call(a,n&&n.selection,"===",a&&a.id,t):m.call(a,"ifcond",n&&n.selection,"===",a&&a.id,t),(o||0===o)&&(c+=o),c+=">",(s=l.name)?o=s.call(a,{hash:{},data:e}):(s=a&&a.name,o=typeof s===d?s.call(a,{hash:{},data:e}):s),c+=p(o)+"</option>\n            "}function i(a,e){return"selected"}this.compilerInfo=[4,">= 1.0.0"],l=this.merge(l,a.helpers),o=o||{};var t,c,r,h="",d="function",p=this.escapeExpression,f=this,m=l.helperMissing;return h+='<div class="form-group">\n    <label for="zone-name" class="col-xs-2">'+p((c=l._||e&&e._,r={hash:{},data:o},c?c.call(e,"Zone",r):m.call(e,"_","Zone",r)))+'</label>\n    <div class="col-xs-8">\n        <select class="form-control" id="zone-name">\n            <option value="">'+p((c=l._||e&&e._,r={hash:{},data:o},c?c.call(e,"All",r):m.call(e,"_","All",r)))+"</option>\n            ",t=l.each.call(e,e&&e.zones,{hash:{},inverse:f.noop,fn:f.programWithDepth(1,s,o,e),data:o}),(t||0===t)&&(h+=t),h+="\n        </select>\n    </div>\n</div>"});
},{"hbsfy/runtime":308}],23:[function(require,module,exports){
var HandlebarsCompiler=require("hbsfy/runtime");module.exports=HandlebarsCompiler.template(function(a,n,l,e,o){function r(a,n){return'\n            <img src="/static/images/loading.gif" class="float-center float-over-select loading"/>\n        '}function i(a,n){return"loading-transparency"}function s(a,n){return"disabled"}function t(a,n){var e,o,r,i="";return i+='\n                <option value="">'+v((o=l._||a&&a._,r={hash:{},data:n},o?o.call(a,"All",r):m.call(a,"_","All",r)))+"</option>\n                ",e=l.each.call(a,a&&a.groups,{hash:{},inverse:b.noop,fn:b.programWithDepth(8,c,n,a),data:n}),(e||0===e)&&(i+=e),i+="\n            "}function c(a,n,e){var o,r,i,s="";return s+=v((r=l._||a&&a._,i={hash:{},data:n},r?r.call(a,"s",i):m.call(a,"_","s",i)))+'\n                    <option value="',(r=l.id)?o=r.call(a,{hash:{},data:n}):(r=a&&a.id,o=typeof r===_?r.call(a,{hash:{},data:n}):r),s+=v(o)+'" ',r=l.ifcond||e&&e.ifcond,i={hash:{},inverse:b.noop,fn:b.program(9,d,n),data:n},o=r?r.call(a,e&&e.selection,"===",a&&a.id,i):m.call(a,"ifcond",e&&e.selection,"===",a&&a.id,i),(o||0===o)&&(s+=o),s+=">",(r=l.name)?o=r.call(a,{hash:{},data:n}):(r=a&&a.name,o=typeof r===_?r.call(a,{hash:{},data:n}):r),s+=v(o)+"</option>\n                "}function d(a,n){return"selected"}function h(a,n){var e,o,r="";return r+="\n                <option disabled>"+v((e=l._||a&&a._,o={hash:{},data:n},e?e.call(a,"All",o):m.call(a,"_","All",o)))+"</option>\n            "}this.compilerInfo=[4,">= 1.0.0"],l=this.merge(l,a.helpers),o=o||{};var p,f,u,g="",m=l.helperMissing,v=this.escapeExpression,_="function",b=this;return g+='<div class="form-group">\n    <label for="group-name" class="col-xs-2">'+v((f=l._||n&&n._,u={hash:{},data:o},f?f.call(n,"Group",u):m.call(n,"_","Group",u)))+'</label>\n    <div class="col-xs-8">\n        ',p=l.if.call(n,n&&n.loading,{hash:{},inverse:b.noop,fn:b.program(1,r,o),data:o}),(p||0===p)&&(g+=p),g+='\n        <select class="form-control ',p=l.if.call(n,n&&n.loading,{hash:{},inverse:b.noop,fn:b.program(3,i,o),data:o}),(p||0===p)&&(g+=p),g+='" id="group-name" ',p=l.if.call(n,n&&n.is_disabled,{hash:{},inverse:b.noop,fn:b.program(5,s,o),data:o}),(p||0===p)&&(g+=p),g+=">\n            ",p=l.if.call(n,n&&n.groups,{hash:{},inverse:b.program(11,h,o),fn:b.program(7,t,o),data:o}),(p||0===p)&&(g+=p),g+="\n        </select>\n    </div>\n</div>"});
},{"hbsfy/runtime":308}],22:[function(require,module,exports){
var HandlebarsCompiler=require("hbsfy/runtime");module.exports=HandlebarsCompiler.template(function(a,n,l,e,i){function o(a,n){return'\n            <img src="/static/images/loading.gif" class="float-center float-over-select loading"/>\n        '}function t(a,n){return"loading-transparency"}function s(a,n){return"disabled"}function r(a,n,e){var i,o,t,s="";return s+='\n                <option value="',(o=l.id)?i=o.call(a,{hash:{},data:n}):(o=a&&a.id,i=typeof o===m?o.call(a,{hash:{},data:n}):o),s+=u(i)+'" ',o=l.ifcond||e&&e.ifcond,t={hash:{},inverse:g.noop,fn:g.program(8,c,n),data:n},i=o?o.call(a,e&&e.selection,"===",a&&a.id,t):v.call(a,"ifcond",e&&e.selection,"===",a&&a.id,t),(i||0===i)&&(s+=i),s+=">",(o=l.name)?i=o.call(a,{hash:{},data:n}):(o=a&&a.name,i=typeof o===m?o.call(a,{hash:{},data:n}):o),s+=u(i)+"</option>\n            "}function c(a,n){return"selected"}this.compilerInfo=[4,">= 1.0.0"],l=this.merge(l,a.helpers),i=i||{};var d,h,f,p="",m="function",u=this.escapeExpression,g=this,v=l.helperMissing;return p+='<div class="form-group">\n    <label for="facility-name" class="col-xs-2">'+u((h=l._||n&&n._,f={hash:{},data:i},h?h.call(n,"Facility",f):v.call(n,"_","Facility",f)))+'</label>\n    <div class="col-xs-8">\n        ',d=l.if.call(n,n&&n.loading,{hash:{},inverse:g.noop,fn:g.program(1,o,i),data:i}),(d||0===d)&&(p+=d),p+='\n        <select class="form-control ',d=l.if.call(n,n&&n.loading,{hash:{},inverse:g.noop,fn:g.program(3,t,i),data:i}),(d||0===d)&&(p+=d),p+='" id="facility-name" ',d=l.if.call(n,n&&n.is_disabled,{hash:{},inverse:g.noop,fn:g.program(5,s,i),data:i}),(d||0===d)&&(p+=d),p+='>\n            <option value="">'+u((h=l._||n&&n._,f={hash:{},data:i},h?h.call(n,"All",f):v.call(n,"_","All",f)))+"</option>\n            ",d=l.each.call(n,n&&n.facilities,{hash:{},inverse:g.noop,fn:g.programWithDepth(7,r,i,n),data:i}),(d||0===d)&&(p+=d),p+="\n        </select>\n    </div>\n</div>"});
},{"hbsfy/runtime":308}],21:[function(require,module,exports){
var HandlebarsCompiler=require("hbsfy/runtime");module.exports=HandlebarsCompiler.template(function(a,l,o,s,e){function t(a,l){var s,e,t="";return t+='\n                <option value="test_log">'+_((s=o._||a&&a._,e={hash:{},data:l},s?s.call(a,"Test Logs",e):p.call(a,"_","Test Logs",e)))+"</option>\n                "}function n(a,l){var s,e,t="";return t+='\n                <option value="device_log">'+_((s=o._||a&&a._,e={hash:{},data:l},s?s.call(a,"Device Logs",e):p.call(a,"_","Device Logs",e)))+"</option>\n                "}this.compilerInfo=[4,">= 1.0.0"],o=this.merge(o,a.helpers),e=e||{};var i,c,r,d="",p=o.helperMissing,_=this.escapeExpression,h=this;return d+='<form class="form-horizontal" role="form" id="data-export-form" method="GET">\n    <div id="student-select-container"></div>\n    <div class="form-group">\n        <label for="resource-name" class="col-xs-2">'+_((c=o._||l&&l._,r={hash:{},data:e},c?c.call(l,"Resource",r):p.call(l,"_","Resource",r)))+'</label>\n        <div class="col-xs-8">\n            <select class="form-control" id="resource-id">\n                <option value="facility_user">'+_((c=o._||l&&l._,r={hash:{},data:e},c?c.call(l,"Facility User Logs",r):p.call(l,"_","Facility User Logs",r)))+'</option>\n                <option value="attempt_log">'+_((c=o._||l&&l._,r={hash:{},data:e},c?c.call(l,"Attempt Logs",r):p.call(l,"_","Attempt Logs",r)))+'</option>\n                <option value="exercise_log">'+_((c=o._||l&&l._,r={hash:{},data:e},c?c.call(l,"Exercise Logs",r):p.call(l,"_","Exercise Logs",r)))+'</option>\n                <option value="content_rating">'+_((c=o._||l&&l._,r={hash:{},data:e},c?c.call(l,"Ratings",r):p.call(l,"_","Ratings",r)))+"</option>\n                ",i=o.if.call(l,l&&l.is_nalanda,{hash:{},inverse:h.noop,fn:h.program(1,t,e),data:e}),(i||0===i)&&(d+=i),d+="\n                ",i=o.if.call(l,l&&l.is_central,{hash:{},inverse:h.noop,fn:h.program(3,n,e),data:e}),(i||0===i)&&(d+=i),d+='\n            </select>\n        </div>\n    </div>\n    <div class="form-group">\n        <label for="data-type" class="col-xs-2">'+_((c=o._||l&&l._,r={hash:{},data:e},c?c.call(l,"Data Type",r):p.call(l,"_","Data Type",r)))+'</label>\n        <div class="col-xs-8">\n            <select class="form-control" id="test-name" disabled>\n                <option>'+_((c=o._||l&&l._,r={hash:{},data:e},c?c.call(l,"CSV",r):p.call(l,"_","CSV",r)))+'</option>\n            </select>\n        </div>\n    </div>\n    <div class="form-group">\n        <div class="col-xs-2"></div>\n        <div class="col-xs-8">\n            <button id="export-button" class="btn btn-success">\n                '+_((c=o._||l&&l._,r={hash:{},data:e},c?c.call(l,"Export",r):p.call(l,"_","Export",r)))+"\n            </button>\n        </div>\n    </div>\n</form>\n"});
},{"hbsfy/runtime":308}]},{},["data_export"])
//# sourceMappingURL=data:application/json;charset:utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJrYWxpdGUvY29udHJvbF9wYW5lbC9zdGF0aWMvanMvY29udHJvbF9wYW5lbC9idW5kbGVfbW9kdWxlcy9kYXRhX2V4cG9ydC5qcyIsImthbGl0ZS9jb250cm9sX3BhbmVsL3N0YXRpYy9qcy9jb250cm9sX3BhbmVsL2RhdGFfZXhwb3J0L3ZpZXdzLmpzIiwia2FsaXRlL2NvbnRyb2xfcGFuZWwvc3RhdGljL2pzL2NvbnRyb2xfcGFuZWwvZGF0YV9leHBvcnQvbW9kZWxzLmpzIiwia2FsaXRlL2NvbnRyb2xfcGFuZWwvc3RhdGljL2pzL2NvbnRyb2xfcGFuZWwvZGF0YV9leHBvcnQvaGJ0ZW1wbGF0ZXMvem9uZS1zZWxlY3QuaGFuZGxlYmFycyIsImthbGl0ZS9jb250cm9sX3BhbmVsL3N0YXRpYy9qcy9jb250cm9sX3BhbmVsL2RhdGFfZXhwb3J0L2hidGVtcGxhdGVzL2dyb3VwLXNlbGVjdC5oYW5kbGViYXJzIiwia2FsaXRlL2NvbnRyb2xfcGFuZWwvc3RhdGljL2pzL2NvbnRyb2xfcGFuZWwvZGF0YV9leHBvcnQvaGJ0ZW1wbGF0ZXMvZmFjaWxpdHktc2VsZWN0LmhhbmRsZWJhcnMiLCJrYWxpdGUvY29udHJvbF9wYW5lbC9zdGF0aWMvanMvY29udHJvbF9wYW5lbC9kYXRhX2V4cG9ydC9oYnRlbXBsYXRlcy9kYXRhLWV4cG9ydC1jb250YWluZXIuaGFuZGxlYmFycyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQ0FBOztBQ0FBOztBQ0FBOztBQ0FBOztBQ0FBOztBQ0FBOztBQ0FBIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3ZhciBmPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIik7dGhyb3cgZi5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGZ9dmFyIGw9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sbCxsLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSIsInZhciAkPXJlcXVpcmUoXCJiYXNlL2pRdWVyeVwiKSxEYXRhRXhwb3J0Vmlldz1yZXF1aXJlKFwiZGF0YV9leHBvcnQvdmlld3NcIikuRGF0YUV4cG9ydFZpZXcsRGF0YUV4cG9ydFN0YXRlTW9kZWw9cmVxdWlyZShcImRhdGFfZXhwb3J0L21vZGVsc1wiKS5EYXRhRXhwb3J0U3RhdGVNb2RlbDttb2R1bGUuZXhwb3J0cz17JDokLERhdGFFeHBvcnRWaWV3OkRhdGFFeHBvcnRWaWV3LERhdGFFeHBvcnRTdGF0ZU1vZGVsOkRhdGFFeHBvcnRTdGF0ZU1vZGVsfTsiLCJ2YXIgSGFuZGxlYmFycz1yZXF1aXJlKFwiYmFzZS9oYW5kbGViYXJzXCIpLEJhY2tib25lPXJlcXVpcmUoXCJiYXNlL2JhY2tib25lXCIpLCQ9cmVxdWlyZShcImJhc2UvalF1ZXJ5XCIpLE1vZGVscz1yZXF1aXJlKFwiLi9tb2RlbHNcIiksRGF0YUV4cG9ydFZpZXc9QmFja2JvbmUuVmlldy5leHRlbmQoe3RlbXBsYXRlOnJlcXVpcmUoXCIuL2hidGVtcGxhdGVzL2RhdGEtZXhwb3J0LWNvbnRhaW5lci5oYW5kbGViYXJzXCIpLGluaXRpYWxpemU6ZnVuY3Rpb24oZSl7dGhpcy5vcHRpb25zPWV8fHt9LHRoaXMuem9uZV9zZWxlY3Rfdmlldz1uZXcgWm9uZVNlbGVjdFZpZXcoe29yZ19pZDplLm9yZ19pZCxtb2RlbDp0aGlzLm1vZGVsfSksdGhpcy5mYWNpbGl0eV9zZWxlY3Rfdmlldz1uZXcgRmFjaWxpdHlTZWxlY3RWaWV3KHttb2RlbDp0aGlzLm1vZGVsfSksdGhpcy5ncm91cF9zZWxlY3Rfdmlldz1uZXcgR3JvdXBTZWxlY3RWaWV3KHttb2RlbDp0aGlzLm1vZGVsfSksdGhpcy5yZW5kZXIoKX0sZXZlbnRzOntcImNsaWNrICNleHBvcnQtYnV0dG9uXCI6XCJleHBvcnRfZGF0YVwiLFwiY2hhbmdlICNyZXNvdXJjZS1pZFwiOlwicmVzb3VyY2VfY2hhbmdlZFwifSxyZW5kZXI6ZnVuY3Rpb24oKXt0aGlzLiRlbC5odG1sKHRoaXMudGVtcGxhdGUodGhpcy5tb2RlbC5hdHRyaWJ1dGVzKSksdGhpcy4kKFwiI3N0dWRlbnQtc2VsZWN0LWNvbnRhaW5lclwiKS5hcHBlbmQodGhpcy56b25lX3NlbGVjdF92aWV3LiRlbCksdGhpcy4kKFwiI3N0dWRlbnQtc2VsZWN0LWNvbnRhaW5lclwiKS5hcHBlbmQodGhpcy5mYWNpbGl0eV9zZWxlY3Rfdmlldy4kZWwpLHRoaXMuJChcIiNzdHVkZW50LXNlbGVjdC1jb250YWluZXJcIikuYXBwZW5kKHRoaXMuZ3JvdXBfc2VsZWN0X3ZpZXcuJGVsKX0scmVzb3VyY2VfY2hhbmdlZDpmdW5jdGlvbigpe3RoaXMubW9kZWwuc2V0KHtyZXNvdXJjZV9pZDp0aGlzLiQoXCIjcmVzb3VyY2UtaWRcIikudmFsKCl9KX0scmVzb3VyY2VfZW5kcG9pbnQ6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLm1vZGVsLmdldChcInJlc291cmNlX2lkXCIpO3N3aXRjaChlKXtjYXNlXCJmYWNpbGl0eV91c2VyXCI6cmV0dXJuIEZBQ0lMSVRZX1VTRVJfQ1NWX1VSTDtjYXNlXCJ0ZXN0X2xvZ1wiOnJldHVybiBURVNUX0xPR19DU1ZfVVJMO2Nhc2VcImF0dGVtcHRfbG9nXCI6cmV0dXJuIEFUVEVNUFRfTE9HX0NTVl9VUkw7Y2FzZVwiZXhlcmNpc2VfbG9nXCI6cmV0dXJuIEVYRVJDSVNFX0xPR19DU1ZfVVJMO2Nhc2VcImRldmljZV9sb2dcIjpyZXR1cm4gREVWSUNFX0xPR19DU1ZfVVJMO2Nhc2VcImNvbnRlbnRfcmF0aW5nXCI6cmV0dXJuIENPTlRFTlRfUkFUSU5HX0NTVl9VUkx9fSxleHBvcnRfZGF0YTpmdW5jdGlvbihlKXtlLnByZXZlbnREZWZhdWx0KCk7dmFyIHQ9dGhpcy5tb2RlbC5nZXQoXCJ6b25lX2lkXCIpLGk9dGhpcy5tb2RlbC5nZXQoXCJmYWNpbGl0eV9pZFwiKSxzPXRoaXMubW9kZWwuZ2V0KFwiZ3JvdXBfaWRcIiksbD0odGhpcy5yZXNvdXJjZV9lbmRwb2ludCgpLFwiXCIpO3ZvaWQgMCE9PXQmJlwiXCIhPT10fHwobD1fLm1hcCh0aGlzLnpvbmVfc2VsZWN0X3ZpZXcuem9uZV9saXN0Lm1vZGVscyxmdW5jdGlvbihlKXtyZXR1cm4gZS5nZXQoXCJpZFwiKX0pLmpvaW4oKSk7dmFyIG49XCI/XCIrJC5wYXJhbSh7Z3JvdXBfaWQ6cyxmYWNpbGl0eV9pZDppLHpvbmVfaWQ6dCx6b25lX2lkczpsLGZvcm1hdDpcImNzdlwiLGxpbWl0OjB9KSxvPXRoaXMucmVzb3VyY2VfZW5kcG9pbnQoKStuO3dpbmRvdy5sb2NhdGlvbj1vfX0pLFpvbmVTZWxlY3RWaWV3PUJhY2tib25lLlZpZXcuZXh0ZW5kKHt0ZW1wbGF0ZTpyZXF1aXJlKFwiLi9oYnRlbXBsYXRlcy96b25lLXNlbGVjdC5oYW5kbGViYXJzXCIpLGluaXRpYWxpemU6ZnVuY3Rpb24oKXt0aGlzLnpvbmVfbGlzdD1uZXcgTW9kZWxzLlpvbmVDb2xsZWN0aW9uLHRoaXMubW9kZWwuZ2V0KFwiaXNfY2VudHJhbFwiKSYmKHRoaXMubGlzdGVuVG8odGhpcy56b25lX2xpc3QsXCJzeW5jXCIsdGhpcy5yZW5kZXIpLHRoaXMuem9uZV9saXN0LmZldGNoKHtkYXRhOiQucGFyYW0oe29yZ19pZDp0aGlzLm9wdGlvbnMub3JnX2lkLGxpbWl0OjB9KX0pKSx0aGlzLnJlbmRlcigpfSxyZW5kZXI6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLnRlbXBsYXRlKHt6b25lczp0aGlzLnpvbmVfbGlzdC50b0pTT04oKSxzZWxlY3Rpb246dGhpcy5tb2RlbC5nZXQoXCJ6b25lX2lkXCIpfSk7dGhpcy5tb2RlbC5nZXQoXCJpc19jZW50cmFsXCIpP3RoaXMuJGVsLmh0bWwoZSk6dGhpcy4kZWwuaHRtbChlKS5oaWRlKCl9LGV2ZW50czp7Y2hhbmdlOlwiem9uZV9jaGFuZ2VkXCJ9LHpvbmVfY2hhbmdlZDpmdW5jdGlvbihlKXt2YXIgdD10aGlzLiQoXCJzZWxlY3RcIikudmFsKCk7dGhpcy5tb2RlbC5zZXQoe2ZhY2lsaXR5X2lkOnZvaWQgMCxncm91cF9pZDp2b2lkIDAsem9uZV9pZDp0fSl9fSksRmFjaWxpdHlTZWxlY3RWaWV3PUJhY2tib25lLlZpZXcuZXh0ZW5kKHt0ZW1wbGF0ZTpyZXF1aXJlKFwiLi9oYnRlbXBsYXRlcy9mYWNpbGl0eS1zZWxlY3QuaGFuZGxlYmFyc1wiKSxpbml0aWFsaXplOmZ1bmN0aW9uKCl7dGhpcy5mYWNpbGl0eV9saXN0PW5ldyBNb2RlbHMuRmFjaWxpdHlDb2xsZWN0aW9uLHRoaXMubGlzdGVuVG8odGhpcy5mYWNpbGl0eV9saXN0LFwic3luY1wiLHRoaXMucmVuZGVyKSx0aGlzLmxpc3RlblRvKHRoaXMuZmFjaWxpdHlfbGlzdCxcInJlc2V0XCIsdGhpcy5yZW5kZXIpLHRoaXMubGlzdGVuVG8odGhpcy5tb2RlbCxcImNoYW5nZTpyZXNvdXJjZV9pZFwiLHRoaXMucmVuZGVyKSx0aGlzLm1vZGVsLmdldChcImlzX2NlbnRyYWxcIikmJnRoaXMubGlzdGVuVG8odGhpcy5tb2RlbCxcImNoYW5nZTp6b25lX2lkXCIsdGhpcy5mZXRjaF9ieV96b25lKSx0aGlzLmZldGNoX2J5X3pvbmUoKSx0aGlzLnJlbmRlcigpfSxyZW5kZXI6ZnVuY3Rpb24oKXt2YXIgZT17ZmFjaWxpdGllczp0aGlzLmZhY2lsaXR5X2xpc3QudG9KU09OKCksc2VsZWN0aW9uOnRoaXMubW9kZWwuZ2V0KFwiZmFjaWxpdHlfaWRcIiksaXNfZGlzYWJsZWQ6dGhpcy5pc19kaXNhYmxlZCgpfTtyZXR1cm4gdGhpcy4kZWwuaHRtbCh0aGlzLnRlbXBsYXRlKGUpKSx0aGlzfSxpc19kaXNhYmxlZDpmdW5jdGlvbigpe3JldHVybiEoXCJkZXZpY2VfbG9nXCIhPT10aGlzLm1vZGVsLmdldChcInJlc291cmNlX2lkXCIpJiYhd2luZG93LklTX0ZBQ0lMSVRZX1VTRVIpfHwodm9pZCAwPT09dGhpcy5tb2RlbC5nZXQoXCJ6b25lX2lkXCIpfHxcIlwiPT09dGhpcy5tb2RlbC5nZXQoXCJ6b25lX2lkXCIpKSYmdGhpcy5tb2RlbC5nZXQoXCJpc19jZW50cmFsXCIpfSxyZW5kZXJfd2FpdGluZzpmdW5jdGlvbigpe3ZhciBlPXtpc19kaXNhYmxlZDohMCxsb2FkaW5nOiEwfTt0aGlzLiRlbC5odG1sKHRoaXMudGVtcGxhdGUoZSkpfSxldmVudHM6e2NoYW5nZTpcImZhY2lsaXR5X2NoYW5nZWRcIn0sZmFjaWxpdHlfY2hhbmdlZDpmdW5jdGlvbihlKXt2YXIgdD10aGlzLiQoXCJzZWxlY3RcIikudmFsKCk7dGhpcy5tb2RlbC5zZXQoe2dyb3VwX2lkOnZvaWQgMCxmYWNpbGl0eV9pZDp0fSl9LGZldGNoX2J5X3pvbmU6ZnVuY3Rpb24oKXtpZih0aGlzLm1vZGVsLmdldChcImlzX2NlbnRyYWxcIikpe3ZhciBlPXRoaXMubW9kZWwuZ2V0KFwiem9uZV9pZFwiKTtlPyh0aGlzLnJlbmRlcl93YWl0aW5nKCksdGhpcy5mYWNpbGl0eV9saXN0LmZldGNoKHtkYXRhOiQucGFyYW0oe3pvbmVfaWQ6ZSxsaW1pdDowfSl9KSk6dGhpcy5mYWNpbGl0eV9saXN0LnJlc2V0KCl9ZWxzZSB0aGlzLnJlbmRlcl93YWl0aW5nKCksdGhpcy5mYWNpbGl0eV9saXN0LmZldGNoKCl9fSksR3JvdXBTZWxlY3RWaWV3PUJhY2tib25lLlZpZXcuZXh0ZW5kKHt0ZW1wbGF0ZTpyZXF1aXJlKFwiLi9oYnRlbXBsYXRlcy9ncm91cC1zZWxlY3QuaGFuZGxlYmFyc1wiKSxpbml0aWFsaXplOmZ1bmN0aW9uKCl7dGhpcy5ncm91cF9saXN0PW5ldyBNb2RlbHMuR3JvdXBDb2xsZWN0aW9uLHRoaXMuZmV0Y2hfYnlfZmFjaWxpdHkoKSx0aGlzLmxpc3RlblRvKHRoaXMuZ3JvdXBfbGlzdCxcInN5bmNcIix0aGlzLnJlbmRlciksdGhpcy5saXN0ZW5Ubyh0aGlzLmdyb3VwX2xpc3QsXCJyZXNldFwiLHRoaXMucmVuZGVyKSx0aGlzLmxpc3RlblRvKHRoaXMubW9kZWwsXCJjaGFuZ2U6cmVzb3VyY2VfaWRcIix0aGlzLnJlbmRlciksdGhpcy5saXN0ZW5Ubyh0aGlzLm1vZGVsLFwiY2hhbmdlOmZhY2lsaXR5X2lkXCIsdGhpcy5mZXRjaF9ieV9mYWNpbGl0eSksdGhpcy5yZW5kZXIoKX0scmVuZGVyOmZ1bmN0aW9uKCl7dmFyIGU9e2dyb3Vwczp0aGlzLmdyb3VwX2xpc3QudG9KU09OKCksc2VsZWN0aW9uOnRoaXMubW9kZWwuZ2V0KFwiZ3JvdXBfaWRcIiksaXNfZGlzYWJsZWQ6dGhpcy5pc19kaXNhYmxlZCgpfTtyZXR1cm4gdGhpcy4kZWwuaHRtbCh0aGlzLnRlbXBsYXRlKGUpKSx0aGlzfSxpc19kaXNhYmxlZDpmdW5jdGlvbigpe3JldHVyblwiZGV2aWNlX2xvZ1wiPT09dGhpcy5tb2RlbC5nZXQoXCJyZXNvdXJjZV9pZFwiKXx8IXRoaXMubW9kZWwuZ2V0KFwiZmFjaWxpdHlfaWRcIil9LHJlbmRlcl93YWl0aW5nOmZ1bmN0aW9uKCl7dmFyIGU9e2lzX2Rpc2FibGVkOiEwLGxvYWRpbmc6ITB9O3RoaXMuJGVsLmh0bWwodGhpcy50ZW1wbGF0ZShlKSl9LGV2ZW50czp7Y2hhbmdlOlwiZ3JvdXBfY2hhbmdlZFwifSxncm91cF9jaGFuZ2VkOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuJChcInNlbGVjdFwiKS52YWwoKTt0aGlzLm1vZGVsLnNldCh7Z3JvdXBfaWQ6dH0pfSxmZXRjaF9ieV9mYWNpbGl0eTpmdW5jdGlvbigpe3ZhciBlPXRoaXMubW9kZWwuZ2V0KFwiZmFjaWxpdHlfaWRcIik7ZT8odGhpcy5yZW5kZXJfd2FpdGluZygpLHRoaXMuZ3JvdXBfbGlzdC5mZXRjaCh7ZGF0YTokLnBhcmFtKHtmYWNpbGl0eV9pZDplLGxpbWl0OjB9KX0pKTp0aGlzLmdyb3VwX2xpc3QucmVzZXQoKX19KTttb2R1bGUuZXhwb3J0cz17RGF0YUV4cG9ydFZpZXc6RGF0YUV4cG9ydFZpZXcsWm9uZVNlbGVjdFZpZXc6Wm9uZVNlbGVjdFZpZXcsRmFjaWxpdHlTZWxlY3RWaWV3OkZhY2lsaXR5U2VsZWN0VmlldyxHcm91cFNlbGVjdFZpZXc6R3JvdXBTZWxlY3RWaWV3fTsiLCJ2YXIgQmFja2JvbmU9cmVxdWlyZShcImJhc2UvYmFja2JvbmVcIiksWm9uZU1vZGVsPUJhY2tib25lLk1vZGVsLmV4dGVuZCgpLEZhY2lsaXR5TW9kZWw9QmFja2JvbmUuTW9kZWwuZXh0ZW5kKCksR3JvdXBNb2RlbD1CYWNrYm9uZS5Nb2RlbC5leHRlbmQoKSxEYXRhRXhwb3J0U3RhdGVNb2RlbD1CYWNrYm9uZS5Nb2RlbC5leHRlbmQoKSxab25lQ29sbGVjdGlvbj1CYWNrYm9uZS5Db2xsZWN0aW9uLmV4dGVuZCh7bW9kZWw6Wm9uZU1vZGVsLHVybDpBTExfWk9ORVNfVVJMfSksRmFjaWxpdHlDb2xsZWN0aW9uPUJhY2tib25lLkNvbGxlY3Rpb24uZXh0ZW5kKHttb2RlbDpGYWNpbGl0eU1vZGVsLHVybDpBTExfRkFDSUxJVElFU19VUkx9KSxHcm91cENvbGxlY3Rpb249QmFja2JvbmUuQ29sbGVjdGlvbi5leHRlbmQoe21vZGVsOkdyb3VwTW9kZWwsdXJsOkFMTF9HUk9VUFNfVVJMfSk7bW9kdWxlLmV4cG9ydHM9e1pvbmVNb2RlbDpab25lTW9kZWwsRmFjaWxpdHlNb2RlbDpGYWNpbGl0eU1vZGVsLEdyb3VwTW9kZWw6R3JvdXBNb2RlbCxEYXRhRXhwb3J0U3RhdGVNb2RlbDpEYXRhRXhwb3J0U3RhdGVNb2RlbCxab25lQ29sbGVjdGlvbjpab25lQ29sbGVjdGlvbixGYWNpbGl0eUNvbGxlY3Rpb246RmFjaWxpdHlDb2xsZWN0aW9uLEdyb3VwQ29sbGVjdGlvbjpHcm91cENvbGxlY3Rpb259OyIsInZhciBIYW5kbGViYXJzQ29tcGlsZXI9cmVxdWlyZShcImhic2Z5L3J1bnRpbWVcIik7bW9kdWxlLmV4cG9ydHM9SGFuZGxlYmFyc0NvbXBpbGVyLnRlbXBsYXRlKGZ1bmN0aW9uKGEsZSxsLG4sbyl7ZnVuY3Rpb24gcyhhLGUsbil7dmFyIG8scyx0LGM9XCJcIjtyZXR1cm4gYys9J1xcbiAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPVwiJywocz1sLmlkKT9vPXMuY2FsbChhLHtoYXNoOnt9LGRhdGE6ZX0pOihzPWEmJmEuaWQsbz10eXBlb2Ygcz09PWQ/cy5jYWxsKGEse2hhc2g6e30sZGF0YTplfSk6cyksYys9cChvKSsnXCIgJyxzPWwuaWZjb25kfHxuJiZuLmlmY29uZCx0PXtoYXNoOnt9LGludmVyc2U6Zi5ub29wLGZuOmYucHJvZ3JhbSgyLGksZSksZGF0YTplfSxvPXM/cy5jYWxsKGEsbiYmbi5zZWxlY3Rpb24sXCI9PT1cIixhJiZhLmlkLHQpOm0uY2FsbChhLFwiaWZjb25kXCIsbiYmbi5zZWxlY3Rpb24sXCI9PT1cIixhJiZhLmlkLHQpLChvfHwwPT09bykmJihjKz1vKSxjKz1cIj5cIiwocz1sLm5hbWUpP289cy5jYWxsKGEse2hhc2g6e30sZGF0YTplfSk6KHM9YSYmYS5uYW1lLG89dHlwZW9mIHM9PT1kP3MuY2FsbChhLHtoYXNoOnt9LGRhdGE6ZX0pOnMpLGMrPXAobykrXCI8L29wdGlvbj5cXG4gICAgICAgICAgICBcIn1mdW5jdGlvbiBpKGEsZSl7cmV0dXJuXCJzZWxlY3RlZFwifXRoaXMuY29tcGlsZXJJbmZvPVs0LFwiPj0gMS4wLjBcIl0sbD10aGlzLm1lcmdlKGwsYS5oZWxwZXJzKSxvPW98fHt9O3ZhciB0LGMscixoPVwiXCIsZD1cImZ1bmN0aW9uXCIscD10aGlzLmVzY2FwZUV4cHJlc3Npb24sZj10aGlzLG09bC5oZWxwZXJNaXNzaW5nO3JldHVybiBoKz0nPGRpdiBjbGFzcz1cImZvcm0tZ3JvdXBcIj5cXG4gICAgPGxhYmVsIGZvcj1cInpvbmUtbmFtZVwiIGNsYXNzPVwiY29sLXhzLTJcIj4nK3AoKGM9bC5ffHxlJiZlLl8scj17aGFzaDp7fSxkYXRhOm99LGM/Yy5jYWxsKGUsXCJab25lXCIscik6bS5jYWxsKGUsXCJfXCIsXCJab25lXCIscikpKSsnPC9sYWJlbD5cXG4gICAgPGRpdiBjbGFzcz1cImNvbC14cy04XCI+XFxuICAgICAgICA8c2VsZWN0IGNsYXNzPVwiZm9ybS1jb250cm9sXCIgaWQ9XCJ6b25lLW5hbWVcIj5cXG4gICAgICAgICAgICA8b3B0aW9uIHZhbHVlPVwiXCI+JytwKChjPWwuX3x8ZSYmZS5fLHI9e2hhc2g6e30sZGF0YTpvfSxjP2MuY2FsbChlLFwiQWxsXCIscik6bS5jYWxsKGUsXCJfXCIsXCJBbGxcIixyKSkpK1wiPC9vcHRpb24+XFxuICAgICAgICAgICAgXCIsdD1sLmVhY2guY2FsbChlLGUmJmUuem9uZXMse2hhc2g6e30saW52ZXJzZTpmLm5vb3AsZm46Zi5wcm9ncmFtV2l0aERlcHRoKDEscyxvLGUpLGRhdGE6b30pLCh0fHwwPT09dCkmJihoKz10KSxoKz1cIlxcbiAgICAgICAgPC9zZWxlY3Q+XFxuICAgIDwvZGl2PlxcbjwvZGl2PlwifSk7IiwidmFyIEhhbmRsZWJhcnNDb21waWxlcj1yZXF1aXJlKFwiaGJzZnkvcnVudGltZVwiKTttb2R1bGUuZXhwb3J0cz1IYW5kbGViYXJzQ29tcGlsZXIudGVtcGxhdGUoZnVuY3Rpb24oYSxuLGwsZSxvKXtmdW5jdGlvbiByKGEsbil7cmV0dXJuJ1xcbiAgICAgICAgICAgIDxpbWcgc3JjPVwiL3N0YXRpYy9pbWFnZXMvbG9hZGluZy5naWZcIiBjbGFzcz1cImZsb2F0LWNlbnRlciBmbG9hdC1vdmVyLXNlbGVjdCBsb2FkaW5nXCIvPlxcbiAgICAgICAgJ31mdW5jdGlvbiBpKGEsbil7cmV0dXJuXCJsb2FkaW5nLXRyYW5zcGFyZW5jeVwifWZ1bmN0aW9uIHMoYSxuKXtyZXR1cm5cImRpc2FibGVkXCJ9ZnVuY3Rpb24gdChhLG4pe3ZhciBlLG8scixpPVwiXCI7cmV0dXJuIGkrPSdcXG4gICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cIlwiPicrdigobz1sLl98fGEmJmEuXyxyPXtoYXNoOnt9LGRhdGE6bn0sbz9vLmNhbGwoYSxcIkFsbFwiLHIpOm0uY2FsbChhLFwiX1wiLFwiQWxsXCIscikpKStcIjwvb3B0aW9uPlxcbiAgICAgICAgICAgICAgICBcIixlPWwuZWFjaC5jYWxsKGEsYSYmYS5ncm91cHMse2hhc2g6e30saW52ZXJzZTpiLm5vb3AsZm46Yi5wcm9ncmFtV2l0aERlcHRoKDgsYyxuLGEpLGRhdGE6bn0pLChlfHwwPT09ZSkmJihpKz1lKSxpKz1cIlxcbiAgICAgICAgICAgIFwifWZ1bmN0aW9uIGMoYSxuLGUpe3ZhciBvLHIsaSxzPVwiXCI7cmV0dXJuIHMrPXYoKHI9bC5ffHxhJiZhLl8saT17aGFzaDp7fSxkYXRhOm59LHI/ci5jYWxsKGEsXCJzXCIsaSk6bS5jYWxsKGEsXCJfXCIsXCJzXCIsaSkpKSsnXFxuICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPVwiJywocj1sLmlkKT9vPXIuY2FsbChhLHtoYXNoOnt9LGRhdGE6bn0pOihyPWEmJmEuaWQsbz10eXBlb2Ygcj09PV8/ci5jYWxsKGEse2hhc2g6e30sZGF0YTpufSk6cikscys9dihvKSsnXCIgJyxyPWwuaWZjb25kfHxlJiZlLmlmY29uZCxpPXtoYXNoOnt9LGludmVyc2U6Yi5ub29wLGZuOmIucHJvZ3JhbSg5LGQsbiksZGF0YTpufSxvPXI/ci5jYWxsKGEsZSYmZS5zZWxlY3Rpb24sXCI9PT1cIixhJiZhLmlkLGkpOm0uY2FsbChhLFwiaWZjb25kXCIsZSYmZS5zZWxlY3Rpb24sXCI9PT1cIixhJiZhLmlkLGkpLChvfHwwPT09bykmJihzKz1vKSxzKz1cIj5cIiwocj1sLm5hbWUpP289ci5jYWxsKGEse2hhc2g6e30sZGF0YTpufSk6KHI9YSYmYS5uYW1lLG89dHlwZW9mIHI9PT1fP3IuY2FsbChhLHtoYXNoOnt9LGRhdGE6bn0pOnIpLHMrPXYobykrXCI8L29wdGlvbj5cXG4gICAgICAgICAgICAgICAgXCJ9ZnVuY3Rpb24gZChhLG4pe3JldHVyblwic2VsZWN0ZWRcIn1mdW5jdGlvbiBoKGEsbil7dmFyIGUsbyxyPVwiXCI7cmV0dXJuIHIrPVwiXFxuICAgICAgICAgICAgICAgIDxvcHRpb24gZGlzYWJsZWQ+XCIrdigoZT1sLl98fGEmJmEuXyxvPXtoYXNoOnt9LGRhdGE6bn0sZT9lLmNhbGwoYSxcIkFsbFwiLG8pOm0uY2FsbChhLFwiX1wiLFwiQWxsXCIsbykpKStcIjwvb3B0aW9uPlxcbiAgICAgICAgICAgIFwifXRoaXMuY29tcGlsZXJJbmZvPVs0LFwiPj0gMS4wLjBcIl0sbD10aGlzLm1lcmdlKGwsYS5oZWxwZXJzKSxvPW98fHt9O3ZhciBwLGYsdSxnPVwiXCIsbT1sLmhlbHBlck1pc3Npbmcsdj10aGlzLmVzY2FwZUV4cHJlc3Npb24sXz1cImZ1bmN0aW9uXCIsYj10aGlzO3JldHVybiBnKz0nPGRpdiBjbGFzcz1cImZvcm0tZ3JvdXBcIj5cXG4gICAgPGxhYmVsIGZvcj1cImdyb3VwLW5hbWVcIiBjbGFzcz1cImNvbC14cy0yXCI+Jyt2KChmPWwuX3x8biYmbi5fLHU9e2hhc2g6e30sZGF0YTpvfSxmP2YuY2FsbChuLFwiR3JvdXBcIix1KTptLmNhbGwobixcIl9cIixcIkdyb3VwXCIsdSkpKSsnPC9sYWJlbD5cXG4gICAgPGRpdiBjbGFzcz1cImNvbC14cy04XCI+XFxuICAgICAgICAnLHA9bC5pZi5jYWxsKG4sbiYmbi5sb2FkaW5nLHtoYXNoOnt9LGludmVyc2U6Yi5ub29wLGZuOmIucHJvZ3JhbSgxLHIsbyksZGF0YTpvfSksKHB8fDA9PT1wKSYmKGcrPXApLGcrPSdcXG4gICAgICAgIDxzZWxlY3QgY2xhc3M9XCJmb3JtLWNvbnRyb2wgJyxwPWwuaWYuY2FsbChuLG4mJm4ubG9hZGluZyx7aGFzaDp7fSxpbnZlcnNlOmIubm9vcCxmbjpiLnByb2dyYW0oMyxpLG8pLGRhdGE6b30pLChwfHwwPT09cCkmJihnKz1wKSxnKz0nXCIgaWQ9XCJncm91cC1uYW1lXCIgJyxwPWwuaWYuY2FsbChuLG4mJm4uaXNfZGlzYWJsZWQse2hhc2g6e30saW52ZXJzZTpiLm5vb3AsZm46Yi5wcm9ncmFtKDUscyxvKSxkYXRhOm99KSwocHx8MD09PXApJiYoZys9cCksZys9XCI+XFxuICAgICAgICAgICAgXCIscD1sLmlmLmNhbGwobixuJiZuLmdyb3Vwcyx7aGFzaDp7fSxpbnZlcnNlOmIucHJvZ3JhbSgxMSxoLG8pLGZuOmIucHJvZ3JhbSg3LHQsbyksZGF0YTpvfSksKHB8fDA9PT1wKSYmKGcrPXApLGcrPVwiXFxuICAgICAgICA8L3NlbGVjdD5cXG4gICAgPC9kaXY+XFxuPC9kaXY+XCJ9KTsiLCJ2YXIgSGFuZGxlYmFyc0NvbXBpbGVyPXJlcXVpcmUoXCJoYnNmeS9ydW50aW1lXCIpO21vZHVsZS5leHBvcnRzPUhhbmRsZWJhcnNDb21waWxlci50ZW1wbGF0ZShmdW5jdGlvbihhLG4sbCxlLGkpe2Z1bmN0aW9uIG8oYSxuKXtyZXR1cm4nXFxuICAgICAgICAgICAgPGltZyBzcmM9XCIvc3RhdGljL2ltYWdlcy9sb2FkaW5nLmdpZlwiIGNsYXNzPVwiZmxvYXQtY2VudGVyIGZsb2F0LW92ZXItc2VsZWN0IGxvYWRpbmdcIi8+XFxuICAgICAgICAnfWZ1bmN0aW9uIHQoYSxuKXtyZXR1cm5cImxvYWRpbmctdHJhbnNwYXJlbmN5XCJ9ZnVuY3Rpb24gcyhhLG4pe3JldHVyblwiZGlzYWJsZWRcIn1mdW5jdGlvbiByKGEsbixlKXt2YXIgaSxvLHQscz1cIlwiO3JldHVybiBzKz0nXFxuICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9XCInLChvPWwuaWQpP2k9by5jYWxsKGEse2hhc2g6e30sZGF0YTpufSk6KG89YSYmYS5pZCxpPXR5cGVvZiBvPT09bT9vLmNhbGwoYSx7aGFzaDp7fSxkYXRhOm59KTpvKSxzKz11KGkpKydcIiAnLG89bC5pZmNvbmR8fGUmJmUuaWZjb25kLHQ9e2hhc2g6e30saW52ZXJzZTpnLm5vb3AsZm46Zy5wcm9ncmFtKDgsYyxuKSxkYXRhOm59LGk9bz9vLmNhbGwoYSxlJiZlLnNlbGVjdGlvbixcIj09PVwiLGEmJmEuaWQsdCk6di5jYWxsKGEsXCJpZmNvbmRcIixlJiZlLnNlbGVjdGlvbixcIj09PVwiLGEmJmEuaWQsdCksKGl8fDA9PT1pKSYmKHMrPWkpLHMrPVwiPlwiLChvPWwubmFtZSk/aT1vLmNhbGwoYSx7aGFzaDp7fSxkYXRhOm59KToobz1hJiZhLm5hbWUsaT10eXBlb2Ygbz09PW0/by5jYWxsKGEse2hhc2g6e30sZGF0YTpufSk6bykscys9dShpKStcIjwvb3B0aW9uPlxcbiAgICAgICAgICAgIFwifWZ1bmN0aW9uIGMoYSxuKXtyZXR1cm5cInNlbGVjdGVkXCJ9dGhpcy5jb21waWxlckluZm89WzQsXCI+PSAxLjAuMFwiXSxsPXRoaXMubWVyZ2UobCxhLmhlbHBlcnMpLGk9aXx8e307dmFyIGQsaCxmLHA9XCJcIixtPVwiZnVuY3Rpb25cIix1PXRoaXMuZXNjYXBlRXhwcmVzc2lvbixnPXRoaXMsdj1sLmhlbHBlck1pc3Npbmc7cmV0dXJuIHArPSc8ZGl2IGNsYXNzPVwiZm9ybS1ncm91cFwiPlxcbiAgICA8bGFiZWwgZm9yPVwiZmFjaWxpdHktbmFtZVwiIGNsYXNzPVwiY29sLXhzLTJcIj4nK3UoKGg9bC5ffHxuJiZuLl8sZj17aGFzaDp7fSxkYXRhOml9LGg/aC5jYWxsKG4sXCJGYWNpbGl0eVwiLGYpOnYuY2FsbChuLFwiX1wiLFwiRmFjaWxpdHlcIixmKSkpKyc8L2xhYmVsPlxcbiAgICA8ZGl2IGNsYXNzPVwiY29sLXhzLThcIj5cXG4gICAgICAgICcsZD1sLmlmLmNhbGwobixuJiZuLmxvYWRpbmcse2hhc2g6e30saW52ZXJzZTpnLm5vb3AsZm46Zy5wcm9ncmFtKDEsbyxpKSxkYXRhOml9KSwoZHx8MD09PWQpJiYocCs9ZCkscCs9J1xcbiAgICAgICAgPHNlbGVjdCBjbGFzcz1cImZvcm0tY29udHJvbCAnLGQ9bC5pZi5jYWxsKG4sbiYmbi5sb2FkaW5nLHtoYXNoOnt9LGludmVyc2U6Zy5ub29wLGZuOmcucHJvZ3JhbSgzLHQsaSksZGF0YTppfSksKGR8fDA9PT1kKSYmKHArPWQpLHArPSdcIiBpZD1cImZhY2lsaXR5LW5hbWVcIiAnLGQ9bC5pZi5jYWxsKG4sbiYmbi5pc19kaXNhYmxlZCx7aGFzaDp7fSxpbnZlcnNlOmcubm9vcCxmbjpnLnByb2dyYW0oNSxzLGkpLGRhdGE6aX0pLChkfHwwPT09ZCkmJihwKz1kKSxwKz0nPlxcbiAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9XCJcIj4nK3UoKGg9bC5ffHxuJiZuLl8sZj17aGFzaDp7fSxkYXRhOml9LGg/aC5jYWxsKG4sXCJBbGxcIixmKTp2LmNhbGwobixcIl9cIixcIkFsbFwiLGYpKSkrXCI8L29wdGlvbj5cXG4gICAgICAgICAgICBcIixkPWwuZWFjaC5jYWxsKG4sbiYmbi5mYWNpbGl0aWVzLHtoYXNoOnt9LGludmVyc2U6Zy5ub29wLGZuOmcucHJvZ3JhbVdpdGhEZXB0aCg3LHIsaSxuKSxkYXRhOml9KSwoZHx8MD09PWQpJiYocCs9ZCkscCs9XCJcXG4gICAgICAgIDwvc2VsZWN0PlxcbiAgICA8L2Rpdj5cXG48L2Rpdj5cIn0pOyIsInZhciBIYW5kbGViYXJzQ29tcGlsZXI9cmVxdWlyZShcImhic2Z5L3J1bnRpbWVcIik7bW9kdWxlLmV4cG9ydHM9SGFuZGxlYmFyc0NvbXBpbGVyLnRlbXBsYXRlKGZ1bmN0aW9uKGEsbCxvLHMsZSl7ZnVuY3Rpb24gdChhLGwpe3ZhciBzLGUsdD1cIlwiO3JldHVybiB0Kz0nXFxuICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9XCJ0ZXN0X2xvZ1wiPicrXygocz1vLl98fGEmJmEuXyxlPXtoYXNoOnt9LGRhdGE6bH0scz9zLmNhbGwoYSxcIlRlc3QgTG9nc1wiLGUpOnAuY2FsbChhLFwiX1wiLFwiVGVzdCBMb2dzXCIsZSkpKStcIjwvb3B0aW9uPlxcbiAgICAgICAgICAgICAgICBcIn1mdW5jdGlvbiBuKGEsbCl7dmFyIHMsZSx0PVwiXCI7cmV0dXJuIHQrPSdcXG4gICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cImRldmljZV9sb2dcIj4nK18oKHM9by5ffHxhJiZhLl8sZT17aGFzaDp7fSxkYXRhOmx9LHM/cy5jYWxsKGEsXCJEZXZpY2UgTG9nc1wiLGUpOnAuY2FsbChhLFwiX1wiLFwiRGV2aWNlIExvZ3NcIixlKSkpK1wiPC9vcHRpb24+XFxuICAgICAgICAgICAgICAgIFwifXRoaXMuY29tcGlsZXJJbmZvPVs0LFwiPj0gMS4wLjBcIl0sbz10aGlzLm1lcmdlKG8sYS5oZWxwZXJzKSxlPWV8fHt9O3ZhciBpLGMscixkPVwiXCIscD1vLmhlbHBlck1pc3NpbmcsXz10aGlzLmVzY2FwZUV4cHJlc3Npb24saD10aGlzO3JldHVybiBkKz0nPGZvcm0gY2xhc3M9XCJmb3JtLWhvcml6b250YWxcIiByb2xlPVwiZm9ybVwiIGlkPVwiZGF0YS1leHBvcnQtZm9ybVwiIG1ldGhvZD1cIkdFVFwiPlxcbiAgICA8ZGl2IGlkPVwic3R1ZGVudC1zZWxlY3QtY29udGFpbmVyXCI+PC9kaXY+XFxuICAgIDxkaXYgY2xhc3M9XCJmb3JtLWdyb3VwXCI+XFxuICAgICAgICA8bGFiZWwgZm9yPVwicmVzb3VyY2UtbmFtZVwiIGNsYXNzPVwiY29sLXhzLTJcIj4nK18oKGM9by5ffHxsJiZsLl8scj17aGFzaDp7fSxkYXRhOmV9LGM/Yy5jYWxsKGwsXCJSZXNvdXJjZVwiLHIpOnAuY2FsbChsLFwiX1wiLFwiUmVzb3VyY2VcIixyKSkpKyc8L2xhYmVsPlxcbiAgICAgICAgPGRpdiBjbGFzcz1cImNvbC14cy04XCI+XFxuICAgICAgICAgICAgPHNlbGVjdCBjbGFzcz1cImZvcm0tY29udHJvbFwiIGlkPVwicmVzb3VyY2UtaWRcIj5cXG4gICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cImZhY2lsaXR5X3VzZXJcIj4nK18oKGM9by5ffHxsJiZsLl8scj17aGFzaDp7fSxkYXRhOmV9LGM/Yy5jYWxsKGwsXCJGYWNpbGl0eSBVc2VyIExvZ3NcIixyKTpwLmNhbGwobCxcIl9cIixcIkZhY2lsaXR5IFVzZXIgTG9nc1wiLHIpKSkrJzwvb3B0aW9uPlxcbiAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPVwiYXR0ZW1wdF9sb2dcIj4nK18oKGM9by5ffHxsJiZsLl8scj17aGFzaDp7fSxkYXRhOmV9LGM/Yy5jYWxsKGwsXCJBdHRlbXB0IExvZ3NcIixyKTpwLmNhbGwobCxcIl9cIixcIkF0dGVtcHQgTG9nc1wiLHIpKSkrJzwvb3B0aW9uPlxcbiAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPVwiZXhlcmNpc2VfbG9nXCI+JytfKChjPW8uX3x8bCYmbC5fLHI9e2hhc2g6e30sZGF0YTplfSxjP2MuY2FsbChsLFwiRXhlcmNpc2UgTG9nc1wiLHIpOnAuY2FsbChsLFwiX1wiLFwiRXhlcmNpc2UgTG9nc1wiLHIpKSkrJzwvb3B0aW9uPlxcbiAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPVwiY29udGVudF9yYXRpbmdcIj4nK18oKGM9by5ffHxsJiZsLl8scj17aGFzaDp7fSxkYXRhOmV9LGM/Yy5jYWxsKGwsXCJSYXRpbmdzXCIscik6cC5jYWxsKGwsXCJfXCIsXCJSYXRpbmdzXCIscikpKStcIjwvb3B0aW9uPlxcbiAgICAgICAgICAgICAgICBcIixpPW8uaWYuY2FsbChsLGwmJmwuaXNfbmFsYW5kYSx7aGFzaDp7fSxpbnZlcnNlOmgubm9vcCxmbjpoLnByb2dyYW0oMSx0LGUpLGRhdGE6ZX0pLChpfHwwPT09aSkmJihkKz1pKSxkKz1cIlxcbiAgICAgICAgICAgICAgICBcIixpPW8uaWYuY2FsbChsLGwmJmwuaXNfY2VudHJhbCx7aGFzaDp7fSxpbnZlcnNlOmgubm9vcCxmbjpoLnByb2dyYW0oMyxuLGUpLGRhdGE6ZX0pLChpfHwwPT09aSkmJihkKz1pKSxkKz0nXFxuICAgICAgICAgICAgPC9zZWxlY3Q+XFxuICAgICAgICA8L2Rpdj5cXG4gICAgPC9kaXY+XFxuICAgIDxkaXYgY2xhc3M9XCJmb3JtLWdyb3VwXCI+XFxuICAgICAgICA8bGFiZWwgZm9yPVwiZGF0YS10eXBlXCIgY2xhc3M9XCJjb2wteHMtMlwiPicrXygoYz1vLl98fGwmJmwuXyxyPXtoYXNoOnt9LGRhdGE6ZX0sYz9jLmNhbGwobCxcIkRhdGEgVHlwZVwiLHIpOnAuY2FsbChsLFwiX1wiLFwiRGF0YSBUeXBlXCIscikpKSsnPC9sYWJlbD5cXG4gICAgICAgIDxkaXYgY2xhc3M9XCJjb2wteHMtOFwiPlxcbiAgICAgICAgICAgIDxzZWxlY3QgY2xhc3M9XCJmb3JtLWNvbnRyb2xcIiBpZD1cInRlc3QtbmFtZVwiIGRpc2FibGVkPlxcbiAgICAgICAgICAgICAgICA8b3B0aW9uPicrXygoYz1vLl98fGwmJmwuXyxyPXtoYXNoOnt9LGRhdGE6ZX0sYz9jLmNhbGwobCxcIkNTVlwiLHIpOnAuY2FsbChsLFwiX1wiLFwiQ1NWXCIscikpKSsnPC9vcHRpb24+XFxuICAgICAgICAgICAgPC9zZWxlY3Q+XFxuICAgICAgICA8L2Rpdj5cXG4gICAgPC9kaXY+XFxuICAgIDxkaXYgY2xhc3M9XCJmb3JtLWdyb3VwXCI+XFxuICAgICAgICA8ZGl2IGNsYXNzPVwiY29sLXhzLTJcIj48L2Rpdj5cXG4gICAgICAgIDxkaXYgY2xhc3M9XCJjb2wteHMtOFwiPlxcbiAgICAgICAgICAgIDxidXR0b24gaWQ9XCJleHBvcnQtYnV0dG9uXCIgY2xhc3M9XCJidG4gYnRuLXN1Y2Nlc3NcIj5cXG4gICAgICAgICAgICAgICAgJytfKChjPW8uX3x8bCYmbC5fLHI9e2hhc2g6e30sZGF0YTplfSxjP2MuY2FsbChsLFwiRXhwb3J0XCIscik6cC5jYWxsKGwsXCJfXCIsXCJFeHBvcnRcIixyKSkpK1wiXFxuICAgICAgICAgICAgPC9idXR0b24+XFxuICAgICAgICA8L2Rpdj5cXG4gICAgPC9kaXY+XFxuPC9mb3JtPlxcblwifSk7Il19
