{"version":3,"sources":["core/dom.ts"],"names":[],"mappings":"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","file":"dom.js","sourcesContent":["import {isBoolean, isString, isArray, isObject} from \"./util/types\"\n\nexport type HTMLAttrs = { [name: string]: any }\nexport type HTMLChild = string | HTMLElement | (string | HTMLElement)[]\n\nconst _createElement = <T extends keyof HTMLElementTagNameMap>(tag: T) =>\n    (attrs: HTMLAttrs = {}, ...children: HTMLChild[]): HTMLElementTagNameMap[T] => {\n  const element = document.createElement(tag)\n\n  for (const attr in attrs) {\n    const value = attrs[attr]\n\n    if (value == null || isBoolean(value) && !value)\n      continue\n\n    if (attr === \"class\" && isArray(value)) {\n      for (const cls of (value as string[])) {\n        if (cls != null) element.classList.add(cls)\n      }\n      continue\n    }\n\n    if (attr === \"style\" && isObject(value)) {\n      for (const prop in value) {\n        (element.style as any)[prop] = value[prop]\n      }\n      continue\n    }\n\n    if (attr === \"data\" && isObject(value)) {\n      for (const key in value) {\n        element.dataset[key] = value[key]\n      }\n      continue\n    }\n\n    element.setAttribute(attr, value)\n  }\n\n  function append(child: HTMLElement | string) {\n    if (child instanceof HTMLElement)\n      element.appendChild(child)\n    else if (isString(child))\n      element.appendChild(document.createTextNode(child))\n    else if (child != null && child !== false)\n      throw new Error(`expected an HTMLElement, string, false or null, got ${JSON.stringify(child)}`)\n  }\n\n  for (const child of children) {\n    if (isArray(child)) {\n      for (const _child of child)\n        append(_child)\n    } else\n      append(child)\n  }\n\n  return element\n}\n\nexport function createElement<T extends keyof HTMLElementTagNameMap>(tag: T,\n     attrs: HTMLAttrs, ...children: HTMLChild[]): HTMLElementTagNameMap[T] {\n  return _createElement(tag)(attrs, ...children)\n}\n\nexport const\n  div      = _createElement(\"div\"),\n  span     = _createElement(\"span\"),\n  link     = _createElement(\"link\"),\n  style    = _createElement(\"style\"),\n  a        = _createElement(\"a\"),\n  p        = _createElement(\"p\"),\n  i        = _createElement(\"i\"),\n  pre      = _createElement(\"pre\"),\n  button   = _createElement(\"button\"),\n  label    = _createElement(\"label\"),\n  input    = _createElement(\"input\"),\n  select   = _createElement(\"select\"),\n  option   = _createElement(\"option\"),\n  optgroup = _createElement(\"optgroup\"),\n  textarea = _createElement(\"textarea\"),\n  canvas   = _createElement(\"canvas\"),\n  ul       = _createElement(\"ul\"),\n  ol       = _createElement(\"ol\"),\n  li       = _createElement(\"li\");\n\nexport const nbsp = document.createTextNode(\"\\u00a0\")\n\nexport function removeElement(element: HTMLElement): void {\n  const parent = element.parentNode\n  if (parent != null) {\n    parent.removeChild(element)\n  }\n}\n\nexport function replaceWith(element: HTMLElement, replacement: HTMLElement): void {\n  const parent = element.parentNode\n  if (parent != null) {\n    parent.replaceChild(replacement, element)\n  }\n}\n\n\nexport function prepend(element: HTMLElement, ...nodes: Node[]): void {\n  const first = element.firstChild\n  for (const node of nodes) {\n    element.insertBefore(node, first)\n  }\n}\n\nexport function empty(element: HTMLElement): void {\n  let child\n  while (child = element.firstChild) {\n    element.removeChild(child)\n  }\n}\n\nexport function show(element: HTMLElement): void {\n  element.style.display = \"\"\n}\n\nexport function hide(element: HTMLElement): void {\n  element.style.display = \"none\"\n}\n\nexport function position(element: HTMLElement) {\n  return {\n    top: element.offsetTop,\n    left: element.offsetLeft,\n  }\n}\n\nexport function offset(element: HTMLElement) {\n  const rect = element.getBoundingClientRect()\n  return {\n    top:  rect.top  + window.pageYOffset - document.documentElement.clientTop,\n    left: rect.left + window.pageXOffset - document.documentElement.clientLeft,\n  }\n}\n\nexport function matches(el: HTMLElement, selector: string): boolean {\n  const p: any = Element.prototype\n  const f = p.matches || p.webkitMatchesSelector || p.mozMatchesSelector || p.msMatchesSelector\n  return f.call(el, selector)\n}\n\nexport function parent(el: HTMLElement, selector: string): HTMLElement | null {\n  let node: HTMLElement | null = el\n\n  while (node = node.parentElement) {\n    if (matches(node, selector))\n      return node\n  }\n\n  return null\n}\n\nexport type Sizing = {top: number, bottom: number, left: number, right: number}\n\nexport function margin(el: HTMLElement): Sizing {\n  const style = getComputedStyle(el)\n  return {\n    top:    parseFloat(style.marginTop!)    || 0,\n    bottom: parseFloat(style.marginBottom!) || 0,\n    left:   parseFloat(style.marginLeft!)   || 0,\n    right:  parseFloat(style.marginRight!)  || 0,\n  }\n}\n\nexport function padding(el: HTMLElement): Sizing {\n  const style = getComputedStyle(el)\n  return {\n    top:    parseFloat(style.paddingTop!)    || 0,\n    bottom: parseFloat(style.paddingBottom!) || 0,\n    left:   parseFloat(style.paddingLeft!)   || 0,\n    right:  parseFloat(style.paddingRight!)  || 0,\n  }\n}\n\nexport enum Keys {\n  Backspace = 8,\n  Tab       = 9,\n  Enter     = 13,\n  Esc       = 27,\n  PageUp    = 33,\n  PageDown  = 34,\n  Left      = 37,\n  Up        = 38,\n  Right     = 39,\n  Down      = 40,\n  Delete    = 46,\n}\n"]}