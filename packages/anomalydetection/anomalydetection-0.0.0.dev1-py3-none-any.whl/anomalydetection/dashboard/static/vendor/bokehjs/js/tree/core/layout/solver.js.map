{"version":3,"sources":["core/layout/solver.ts"],"names":[],"mappings":"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","file":"solver.js","sourcesContent":["import {Variable, Expression, Constraint, Operator, Strength, Solver as ConstraintSolver} from \"kiwi\"\n\nexport type Term = number | Variable | [number, Variable]\n\nfunction _constrainer(op: Operator) {\n  return (...terms: Term[]) => new Constraint(new Expression(...terms), op)\n}\n\nfunction _weak_constrainer(op: Operator) {\n  return (...terms: Term[]) => new Constraint(new Expression(...terms), op, Strength.weak)\n}\n\nexport {Variable, Expression, Constraint, Operator, Strength}\n\nexport const EQ = _constrainer(Operator.Eq)\nexport const LE = _constrainer(Operator.Le)\nexport const GE = _constrainer(Operator.Ge)\n\nexport const WEAK_EQ = _weak_constrainer(Operator.Eq)\nexport const WEAK_LE = _weak_constrainer(Operator.Le)\nexport const WEAK_GE = _weak_constrainer(Operator.Ge)\n\nexport class Solver {\n\n  protected solver: ConstraintSolver\n\n  constructor() {\n    this.solver = new ConstraintSolver()\n  }\n\n  clear(): void {\n    this.solver = new ConstraintSolver()\n  }\n\n  toString(): string {\n    return `Solver(num_constraints=${this.num_constraints}, num_editables=${this.num_editables})`\n  }\n\n  get num_constraints(): number {\n    return this.solver.numConstraints\n  }\n\n  get num_editables(): number {\n    return this.solver.numEditVariables\n  }\n\n  get_constraints(): Constraint[] {\n    return this.solver.getConstraints()\n  }\n\n  update_variables(): void {\n    this.solver.updateVariables()\n  }\n\n  has_constraint(constraint: Constraint): boolean {\n    return this.solver.hasConstraint(constraint)\n  }\n\n  add_constraint(constraint: Constraint): void {\n    try {\n      this.solver.addConstraint(constraint)\n    } catch (e) {\n      throw new Error(`${e.message}: ${constraint.toString()}`)\n    }\n  }\n\n  remove_constraint(constraint: Constraint): void {\n    this.solver.removeConstraint(constraint)\n  }\n\n  add_edit_variable(variable: Variable, strength: number): void {\n    this.solver.addEditVariable(variable, strength)\n  }\n\n  remove_edit_variable(variable: Variable): void {\n    this.solver.removeEditVariable(variable)\n  }\n\n  suggest_value(variable: Variable, value: number): void {\n    this.solver.suggestValue(variable, value)\n  }\n}\n"]}