{"version":3,"sources":["core/bokeh_events.ts"],"names":[],"mappings":"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","file":"bokeh_events.js","sourcesContent":["import {logger} from \"./logging\"\nimport {clone} from \"./util/object\"\n\nconst event_classes: {[key: string]: typeof BokehEvent} = {}\n\nexport function register_event_class(event_name: string) {\n  return function(event_cls: typeof BokehEvent) {\n    event_cls.prototype.event_name = event_name\n    event_classes[event_name] = event_cls\n  }\n}\n\nexport function register_with_event(event_cls: typeof BokehEvent, ...models: any[]) {\n  const applicable_models = event_cls.prototype.applicable_models.concat(models)\n  event_cls.prototype.applicable_models = applicable_models\n}\n\nexport abstract class BokehEvent {\n\n  /* prototype */ event_name: string\n  /* prototype */ applicable_models: any[]\n\n  protected _options: any\n  model_id: string | null = null\n\n  constructor(options: any = {}) {\n    this._options = options\n    if (options.model_id) {\n      this.model_id = options.model_id\n    }\n  }\n\n  set_model_id(id: string): this {\n    this._options.model_id = id\n    this.model_id = id\n    return this\n  }\n\n  is_applicable_to(obj: any): boolean {\n    return this.applicable_models.some((model) => obj instanceof model)\n  }\n\n  static event_class(e: any): any {\n    // Given an event with a type attribute matching the event_name,\n    // return the appropriate BokehEvent class\n    if (e.type) {\n      return event_classes[e.type]\n    } else {\n      logger.warn('BokehEvent.event_class required events with a string type attribute')\n    }\n  }\n\n  toJSON(): object {\n    return {\n      event_name: this.event_name,\n      event_values: clone(this._options),\n    }\n  }\n\n  _customize_event(_model: any): this {\n    return this\n  }\n}\n\nBokehEvent.prototype.applicable_models = []\n\n@register_event_class(\"button_click\")\nexport class ButtonClick extends BokehEvent {}\n\n// A UIEvent is an event originating on a PlotCanvas this includes\n// DOM events such as keystrokes as well as hammer events and LOD events.\nexport abstract class UIEvent extends BokehEvent {}\n\n@register_event_class(\"lodstart\")\nexport class LODStart extends UIEvent {}\n\n@register_event_class(\"lodend\")\nexport class LODEnd extends UIEvent {}\n\n@register_event_class(\"selectiongeometry\")\nexport class SelectionGeometry extends UIEvent {\n  geometry: any\n  final: boolean\n\n  constructor(options: any) {\n    super(options)\n    this.geometry = options.geometry\n    this.final = options.final\n  }\n}\n\n@register_event_class(\"reset\")\nexport class Reset extends UIEvent {}\n\nexport /* TODO abstract */ class PointEvent extends UIEvent {\n\n  sx: number\n  sy: number\n\n  x: number | null\n  y: number | null\n\n  constructor(options: any) {\n    super(options)\n    this.sx = options.sx\n    this.sy = options.sy\n    this.x = null\n    this.y = null\n  }\n\n  static from_event(e: any, model_id: string | null = null): PointEvent {\n    return new this({ sx: e.sx, sy: e.sy, model_id: model_id })\n  }\n\n  _customize_event(plot: any): this {\n    const xscale = plot.plot_canvas.frame.xscales['default']\n    const yscale = plot.plot_canvas.frame.yscales['default']\n    this.x = xscale.invert(this.sx)\n    this.y = yscale.invert(this.sy)\n    this._options['x'] = this.x\n    this._options['y'] = this.y\n    return this\n  }\n}\n\n@register_event_class(\"pan\")\nexport class Pan extends PointEvent {\n\n  static from_event(e: any, model_id: string | null = null): Pan {\n    return new this({\n      sx: e.sx,\n      sy: e.sy,\n      delta_x: e.deltaX,\n      delta_y: e.deltaY,\n      direction: e.direction,\n      model_id: model_id,\n    })\n  }\n\n  delta_x: number\n  delta_y: number\n\n  constructor(options: any = {}) {\n    super(options)\n    this.delta_x = options.delta_x\n    this.delta_y = options.delta_y\n  }\n}\n\n@register_event_class(\"pinch\")\nexport class Pinch extends PointEvent {\n\n  static from_event(e: any, model_id: string | null = null): Pinch {\n    return new this({\n      sx: e.sx,\n      sy: e.sy,\n      scale: e.scale,\n      model_id: model_id,\n    })\n  }\n\n  scale: number\n\n  constructor(options: any = {}) {\n    super(options)\n    this.scale = options.scale\n  }\n}\n\n@register_event_class(\"wheel\")\nexport class MouseWheel extends PointEvent {\n\n  static from_event(e: any, model_id: string | null = null): MouseWheel {\n    return new this({\n      sx: e.sx,\n      sy: e.sy,\n      delta: e.delta,\n      model_id: model_id,\n    })\n  }\n\n  delta: number\n\n  constructor(options: any = {}) {\n    super(options)\n    this.delta = options.delta\n  }\n}\n\n@register_event_class(\"mousemove\")\nexport class MouseMove extends PointEvent {}\n\n@register_event_class(\"mouseenter\")\nexport class MouseEnter extends PointEvent {}\n\n@register_event_class(\"mouseleave\")\nexport class MouseLeave extends PointEvent {}\n\n@register_event_class(\"tap\")\nexport class Tap extends PointEvent {}\n\n@register_event_class(\"doubletap\")\nexport class DoubleTap extends PointEvent {}\n\n@register_event_class(\"press\")\nexport class Press extends PointEvent {}\n\n@register_event_class(\"panstart\")\nexport class PanStart extends PointEvent {}\n\n@register_event_class(\"panend\")\nexport class PanEnd extends PointEvent {}\n\n@register_event_class(\"pinchstart\")\nexport class PinchStart extends PointEvent {}\n\n@register_event_class(\"pinchend\")\nexport class PinchEnd extends PointEvent {}\n"]}