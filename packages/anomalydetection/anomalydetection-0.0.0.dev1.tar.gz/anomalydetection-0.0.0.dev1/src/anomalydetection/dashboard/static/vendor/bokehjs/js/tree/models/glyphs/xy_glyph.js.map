{"version":3,"sources":["models/glyphs/xy_glyph.ts"],"names":[],"mappings":";;;AAEA,6CAA2D;AAC3D,iCAAmD;AAYnD;IAA0C,uCAAS;IAAnD;;IA2BA,CAAC;IAvBW,iCAAW,GAArB;QACE,IAAM,MAAM,GAAkB,EAAE,CAAA;QAEhC,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,GAAG,GAAG,IAAI,CAAC,EAAE,CAAC,MAAM,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,EAAE,EAAE;YAClD,IAAM,CAAC,GAAG,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,CAAA;YACpB,IAAM,CAAC,GAAG,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,CAAA;YAEpB,IAAI,KAAK,CAAC,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,GAAG,CAAC,CAAC;gBAClC,SAAQ;YAEV,MAAM,CAAC,IAAI,CAAC,EAAC,IAAI,EAAE,CAAC,EAAE,IAAI,EAAE,CAAC,EAAE,IAAI,EAAE,CAAC,EAAE,IAAI,EAAE,CAAC,EAAE,CAAC,GAAA,EAAC,CAAC,CAAA;SACrD;QAED,OAAO,IAAI,sBAAY,CAAC,MAAM,CAAC,CAAA;IACjC,CAAC;IAED,8BAAQ,GAAR,UAAS,CAAS;QAChB,OAAO,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,CAAA;IACnB,CAAC;IAED,8BAAQ,GAAR,UAAS,CAAS;QAChB,OAAO,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,CAAA;IACnB,CAAC;IACH,kBAAC;AAAD,CA3BA,AA2BC,CA3ByC,iBAAS,GA2BlD;AA3BqB,kCAAW;AA0CjC;IAAsC,mCAAK;IAIzC,iBAAY,KAA8B;eACxC,kBAAM,KAAK,CAAC;IACd,CAAC;IAEM,iBAAS,GAAhB;QACE,IAAI,CAAC,SAAS,CAAC,IAAI,GAAG,SAAS,CAAA;QAE/B,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC,CAAC,CAAA;IAC3B,CAAC;IACH,cAAC;AAAD,CAbA,AAaC,CAbqC,aAAK,GAa1C;AAbqB,0BAAO;AAc7B,OAAO,CAAC,SAAS,EAAE,CAAA","file":"xy_glyph.js","sourcesContent":["import {Arrayable} from \"core/types\"\nimport {NumberSpec} from \"core/vectorization\"\nimport {SpatialIndex, IndexedRect} from \"core/util/spatial\"\nimport {Glyph, GlyphView, GlyphData} from \"./glyph\"\n\nexport interface XYGlyphData extends GlyphData {\n  _x: Arrayable<number>\n  _y: Arrayable<number>\n\n  sx: Arrayable<number>\n  sy: Arrayable<number>\n}\n\nexport interface XYGlyphView extends XYGlyphData {}\n\nexport abstract class XYGlyphView extends GlyphView {\n  model: XYGlyph\n  visuals: XYGlyph.Visuals\n\n  protected _index_data(): SpatialIndex {\n    const points: IndexedRect[] = []\n\n    for (let i = 0, end = this._x.length; i < end; i++) {\n      const x = this._x[i]\n      const y = this._y[i]\n\n      if (isNaN(x + y) || !isFinite(x + y))\n        continue\n\n      points.push({minX: x, minY: y, maxX: x, maxY: y, i})\n    }\n\n    return new SpatialIndex(points)\n  }\n\n  scenterx(i: number): number {\n    return this.sx[i]\n  }\n\n  scentery(i: number): number {\n    return this.sy[i]\n  }\n}\n\nexport namespace XYGlyph {\n  export interface Attrs extends Glyph.Attrs {\n    x: NumberSpec\n    y: NumberSpec\n  }\n\n  export interface Props extends Glyph.Props {}\n\n  export interface Visuals extends Glyph.Visuals {}\n}\n\nexport interface XYGlyph extends XYGlyph.Attrs {}\n\nexport abstract class XYGlyph extends Glyph {\n\n  properties: XYGlyph.Props\n\n  constructor(attrs?: Partial<XYGlyph.Attrs>) {\n    super(attrs)\n  }\n\n  static initClass(): void {\n    this.prototype.type = \"XYGlyph\"\n\n    this.coords([['x', 'y']])\n  }\n}\nXYGlyph.initClass()\n"]}