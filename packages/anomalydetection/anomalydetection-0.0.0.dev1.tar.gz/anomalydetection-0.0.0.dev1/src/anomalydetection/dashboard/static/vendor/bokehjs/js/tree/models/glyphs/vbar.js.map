{"version":3,"sources":["models/glyphs/vbar.ts"],"names":[],"mappings":"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","file":"vbar.js","sourcesContent":["import {Box, BoxView, BoxData} from \"./box\"\nimport {Arrayable} from \"core/types\"\nimport {NumberSpec, DistanceSpec} from \"core/vectorization\"\nimport * as p from \"core/properties\"\nimport {SpatialIndex} from \"core/util/spatial\"\n\nexport interface VBarData extends BoxData {\n  _x: Arrayable<number>\n  _bottom: Arrayable<number>\n  _width: Arrayable<number>\n  _top: Arrayable<number>\n\n  sx: Arrayable<number>\n  sw: Arrayable<number>\n  stop: Arrayable<number>\n  sbottom: Arrayable<number>\n  sleft: Arrayable<number>\n  sright: Arrayable<number>\n\n  max_width: number\n}\n\nexport interface VBarView extends VBarData {}\n\nexport class VBarView extends BoxView {\n  model: VBar\n  visuals: VBar.Visuals\n\n  scenterx(i: number): number {\n    return this.sx[i]\n  }\n\n  scentery(i: number): number {\n    return (this.stop[i] + this.sbottom[i])/2\n  }\n\n  protected _index_data(): SpatialIndex {\n    return this._index_box(this._x.length)\n  }\n\n  protected _lrtb(i: number): [number, number, number, number] {\n    const l = this._x[i] - (this._width[i]/2)\n    const r = this._x[i] + (this._width[i]/2)\n    const t = Math.max(this._top[i], this._bottom[i])\n    const b = Math.min(this._top[i], this._bottom[i])\n    return [l, r, t, b]\n  }\n\n  protected _map_data(): void {\n    this.sx = this.renderer.xscale.v_compute(this._x)\n    this.sw = this.sdist(this.renderer.xscale, this._x, this._width, \"center\")\n    this.stop = this.renderer.yscale.v_compute(this._top)\n    this.sbottom = this.renderer.yscale.v_compute(this._bottom)\n\n    const n = this.sx.length\n    this.sleft = new Float64Array(n)\n    this.sright = new Float64Array(n)\n    for (let i = 0; i < n; i++) {\n      this.sleft[i] = this.sx[i] - this.sw[i]/2\n      this.sright[i] = this.sx[i] + this.sw[i]/2\n    }\n  }\n}\n\nexport namespace VBar {\n  export interface Attrs extends Box.Attrs {\n    x: NumberSpec\n    bottom: NumberSpec\n    width: DistanceSpec\n    top: NumberSpec\n  }\n\n  export interface Props extends Box.Props {}\n\n  export interface Visuals extends Box.Visuals {}\n}\n\nexport interface VBar extends VBar.Attrs {}\n\nexport class VBar extends Box {\n\n  properties: VBar.Props\n\n  constructor(attrs?: Partial<VBar.Attrs>) {\n    super(attrs)\n  }\n\n  static initClass(): void {\n    this.prototype.type = 'VBar'\n    this.prototype.default_view = VBarView\n\n    this.coords([['x', 'bottom']])\n    this.define({\n      width:  [ p.DistanceSpec  ],\n      top:    [ p.NumberSpec    ],\n    })\n    this.override({\n      bottom: 0,\n    })\n  }\n}\nVBar.initClass()\n"]}