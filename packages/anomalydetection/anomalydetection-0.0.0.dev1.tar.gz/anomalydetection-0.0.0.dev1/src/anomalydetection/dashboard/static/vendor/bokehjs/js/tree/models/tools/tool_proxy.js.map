{"version":3,"sources":["models/tools/tool_proxy.ts"],"names":[],"mappings":";;;AAAA,mCAAoC;AAEpC,4CAAsC;AAEtC,qCAAiC;AAmBjC;IAA+B,qCAAK;IAIlC,mBAAY,KAAgC;eAC1C,kBAAM,KAAK,CAAC;IACd,CAAC;IAEM,mBAAS,GAAhB;QACE,IAAI,CAAC,SAAS,CAAC,IAAI,GAAG,WAAW,CAAA;QAEjC,IAAI,CAAC,MAAM,CAAC;YACV,KAAK,EAAK,CAAE,CAAC,CAAC,KAAK,EAAE,EAAE,CAAK;YAC5B,MAAM,EAAI,CAAE,CAAC,CAAC,IAAI,EAAG,KAAK,CAAE;YAC5B,QAAQ,EAAE,CAAE,CAAC,CAAC,IAAI,EAAG,KAAK,CAAE;SAC7B,CAAC,CAAA;IACJ,CAAC;IAMD,sBAAI,kCAAW;QAFf,+CAA+C;aAE/C;YACE,OAAO,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,WAAW,CAAA;QAClC,CAAC;;;OAAA;IAED,sBAAI,iCAAU;aAAd;YACE,OAAO,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,UAAU,CAAA;QACjC,CAAC;;;OAAA;IAED,sBAAI,8BAAO;aAAX;YACE,OAAO,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,SAAS,CAAA;QAChC,CAAC;;;OAAA;IAED,sBAAI,gCAAS;aAAb;YACE,OAAO,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,SAAS,CAAA;QAChC,CAAC;;;OAAA;IAED,sBAAI,2BAAI;aAAR;YACE,OAAO,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,IAAI,CAAA;QAC3B,CAAC;;;OAAA;IAED,8BAAU,GAAV;QACE,iBAAM,UAAU,WAAE,CAAA;QAClB,IAAI,CAAC,EAAE,GAAG,IAAI,mBAAO,CAAC,IAAI,EAAE,IAAI,CAAC,CAAA;IACnC,CAAC;IAED,mCAAe,GAAf;QAAA,iBAIC;QAHC,iBAAM,eAAe,WAAE,CAAA;QACvB,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE,EAAE,cAAM,OAAA,KAAI,CAAC,IAAI,EAAE,EAAX,CAAW,CAAC,CAAA;QACxC,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,MAAM,EAAE,cAAM,OAAA,KAAI,CAAC,UAAU,EAAE,EAAjB,CAAiB,CAAC,CAAA;IACtE,CAAC;IAED,wBAAI,GAAJ;QACE,KAAmB,UAAU,EAAV,KAAA,IAAI,CAAC,KAAK,EAAV,cAAU,EAAV,IAAU;YAAxB,IAAM,IAAI,SAAA;YACZ,IAAY,CAAC,EAAE,CAAC,IAAI,EAAE,CAAA;SACxB;IACH,CAAC;IAED,8BAAU,GAAV;QACE,KAAmB,UAAU,EAAV,KAAA,IAAI,CAAC,KAAK,EAAV,cAAU,EAAV,IAAU;YAAxB,IAAM,IAAI,SAAA;YACb,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAA;SAC1B;IACH,CAAC;IAQH,gBAAC;AAAD,CAvEA,AAuEC,CAvE8B,aAAK,GAuEnC;AAvEY,8BAAS;AAwEtB,SAAS,CAAC,SAAS,EAAE,CAAA","file":"tool_proxy.js","sourcesContent":["import * as p from \"core/properties\"\nimport {EventType} from \"core/ui_events\"\nimport {Signal0} from \"core/signaling\"\nimport {Class} from \"core/class\"\nimport {Model} from \"../../model\"\nimport {ButtonTool, ButtonToolButtonView} from \"./button_tool\"\n\nexport namespace ToolProxy {\n  export interface Attrs extends Model.Attrs {\n    tools: ButtonTool[]\n    active: boolean\n    disabled: boolean\n  }\n\n  export interface Props extends Model.Props {\n    tools: p.Property<ButtonTool[]>\n    active: p.Property<boolean>\n    disabled: p.Property<boolean>\n  }\n}\n\nexport interface ToolProxy extends ToolProxy.Attrs {}\n\nexport class ToolProxy extends Model {\n\n  properties: ToolProxy.Props\n\n  constructor(attrs?: Partial<ToolProxy.Attrs>) {\n    super(attrs)\n  }\n\n  static initClass(): void {\n    this.prototype.type = \"ToolProxy\"\n\n    this.define({\n      tools:    [ p.Array, []    ],\n      active:   [ p.Bool,  false ],\n      disabled: [ p.Bool,  false ],\n    })\n  }\n\n  do: Signal0<this>\n\n  // Operates all the tools given only one button\n\n  get button_view(): Class<ButtonToolButtonView> {\n    return this.tools[0].button_view\n  }\n\n  get event_type(): undefined | EventType | EventType[] {\n    return this.tools[0].event_type\n  }\n\n  get tooltip(): string {\n    return this.tools[0].tool_name\n  }\n\n  get tool_name(): string {\n    return this.tools[0].tool_name\n  }\n\n  get icon(): string {\n    return this.tools[0].icon\n  }\n\n  initialize(): void {\n    super.initialize()\n    this.do = new Signal0(this, \"do\")\n  }\n\n  connect_signals(): void {\n    super.connect_signals()\n    this.connect(this.do, () => this.doit())\n    this.connect(this.properties.active.change, () => this.set_active())\n  }\n\n  doit(): void {\n    for (const tool of this.tools) {\n      (tool as any).do.emit()\n    }\n  }\n\n  set_active(): void {\n    for (const tool of this.tools) {\n      tool.active = this.active\n    }\n  }\n\n  /* XXX: this.model?\n  protected _clicked(): void {\n    const {active} = this.model\n    this.model.active = !active\n  }\n  */\n}\nToolProxy.initClass()\n"]}