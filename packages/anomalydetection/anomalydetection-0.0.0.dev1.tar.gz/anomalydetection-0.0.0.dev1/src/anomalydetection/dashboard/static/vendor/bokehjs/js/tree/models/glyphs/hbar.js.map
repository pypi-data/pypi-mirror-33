{"version":3,"sources":["models/glyphs/hbar.ts"],"names":[],"mappings":"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","file":"hbar.js","sourcesContent":["import {Box, BoxView, BoxData} from \"./box\"\nimport {Arrayable} from \"core/types\"\nimport {DistanceSpec, NumberSpec} from \"core/vectorization\"\nimport * as p from \"core/properties\"\nimport {SpatialIndex} from \"core/util/spatial\"\n\nexport interface HBarData extends BoxData {\n  _left: Arrayable<number>\n  _y: Arrayable<number>\n  _height: Arrayable<number>\n  _right: Arrayable<number>\n\n  sy: Arrayable<number>\n  sh: Arrayable<number>\n  sleft: Arrayable<number>\n  sright: Arrayable<number>\n  stop: Arrayable<number>\n  sbottom: Arrayable<number>\n\n  max_height: number\n}\n\nexport interface HBarView extends HBarData {}\n\nexport class HBarView extends BoxView {\n  model: HBar\n  visuals: HBar.Visuals\n\n  scenterx(i: number): number {\n    return (this.sleft[i] + this.sright[i])/2\n  }\n\n  scentery(i: number): number {\n    return this.sy[i]\n  }\n\n  protected _index_data(): SpatialIndex {\n    return this._index_box(this._y.length)\n  }\n\n  protected _lrtb(i: number): [number, number, number, number] {\n    const l = Math.min(this._left[i], this._right[i])\n    const r = Math.max(this._left[i], this._right[i])\n    const t = this._y[i] + 0.5*this._height[i]\n    const b = this._y[i] - 0.5*this._height[i]\n    return [l, r, t, b]\n  }\n\n  protected _map_data(): void {\n    this.sy = this.renderer.yscale.v_compute(this._y)\n    this.sh = this.sdist(this.renderer.yscale, this._y, this._height, \"center\")\n    this.sleft = this.renderer.xscale.v_compute(this._left)\n    this.sright = this.renderer.xscale.v_compute(this._right)\n\n    const n = this.sy.length\n    this.stop = new Float64Array(n)\n    this.sbottom = new Float64Array(n)\n    for (let i = 0; i < n; i++) {\n      this.stop[i] = this.sy[i] - this.sh[i]/2\n      this.sbottom[i] = this.sy[i] + this.sh[i]/2\n    }\n  }\n}\n\nexport namespace HBar {\n  export interface Attrs extends Box.Attrs {\n    left: NumberSpec\n    y: NumberSpec\n    height: DistanceSpec\n    right: NumberSpec\n  }\n\n  export interface Props extends Box.Props {}\n\n  export interface Visuals extends Box.Visuals {}\n}\n\nexport interface HBar extends HBar.Attrs {}\n\nexport class HBar extends Box {\n\n  properties: HBar.Props\n\n  constructor(attrs?: Partial<HBar.Attrs>) {\n    super(attrs)\n  }\n\n  static initClass(): void {\n    this.prototype.type = 'HBar'\n    this.prototype.default_view = HBarView\n\n    this.coords([['left', 'y']])\n    this.define({\n      height: [ p.DistanceSpec  ],\n      right:  [ p.NumberSpec    ],\n    })\n    this.override({ left: 0 })\n  }\n}\nHBar.initClass()\n"]}