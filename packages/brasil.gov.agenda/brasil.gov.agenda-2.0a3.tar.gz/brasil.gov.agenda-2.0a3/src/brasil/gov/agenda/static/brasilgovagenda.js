!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.brasilgovagenda=e():t.brasilgovagenda=e()}("undefined"!=typeof self?self:this,function(){return function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="++resource++brasil.gov.agenda/",e(e.s=1)}([function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){var n=[],i=!0,r=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(i=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);i=!0);}catch(t){r=!0,a=t}finally{try{!i&&s.return&&s.return()}finally{if(r)throw a}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return(Array(e).fill("0").join("")+t).slice(-1*e)},s=function(){function t(e,n){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];i(this,t),this.container=e,this.agendaURL=e.getAttribute("data-url"),this.callback=n,this.updateTitle=a,this.$month=this.$(".monthpicker .month, .calendar-title .strmonth"),this.$year=this.$(".monthpicker .year, .calendar-title .year"),this.$day=this.$(".daypicker"),this.$datePicker=this.$(".monthpicker input"),this.$datePicker3=this.$(".calendar"),this.$currentPicker=this.$datePicker.length>0?this.$datePicker:this.$datePicker3,this.daysWithAppointments=[],this.initMonthPicker();var o=new Date;if(this.year=o.getFullYear(),this.month=o.getMonth(),this.day=o.getDate(),this.$(".daypicker").on("click",".day",this.onDayClick.bind(this)),$(".portaltype-agendadiaria").length>0){var s=location.pathname.split("/").pop(),l=s.split("-").map(function(t){return parseInt(t)}),c=r(l,3),u=c[0],d=c[1],h=c[2],p=new Date(u,d-1,h);this.year=p.getFullYear(),this.month=p.getMonth(),this.day=p.getDate()}}return a(t,[{key:"$",value:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(t){return $(t,this.container)})},{key:"update",value:function(){var t=this.year+"-"+o(this.month+1)+"-"+o(this.day);if("function"==typeof this.callback&&$.ajax({url:this.agendaURL+"/json/"+t,context:this,global:!1}).always(function(t){this.callback(t[3]),this.updateDayPicker(t),this.daysWithAppointments=t[3].daysWithAppointments,this.updateMonthPicker()}),this.updateTitle){var e=o(this.day)+"/"+o(this.month+1)+"/"+this.year,n="Agenda de "+$(".documentFirstHeading").text().trim()+" para "+e;window.history.pushState({day:this.day,month:this.month,year:this.year},n,this.agendaURL+"/"+t),document.title=n}}},{key:"updateMonthPicker",value:function(){if(this.$currentPicker.datepicker("setDate",new Date(this.year,this.month,this.day)),this.$datePicker.length>0){var t=this.$currentPicker.datepicker("option","monthNamesShort");this.$month.html(t[this.month].toUpperCase()),this.$year.html(this.year),$(".monthpicker").attr("data-month",this.month),$(".monthpicker").attr("data-year",this.year)}if(this.$datePicker3.length>0){var e=this.$currentPicker.datepicker("option","monthNames");this.$currentPicker.datepicker("option","showCurrentAtPos",1),setTimeout(function(){this.$currentPicker.datepicker("option","showCurrentAtPos",1)}.bind(this),1),this.$month.html(e[this.month].toUpperCase()),this.$year.html(this.year)}}},{key:"updateDayPicker",value:function(t){this.$day.html("");var e=!0,n=!1,i=void 0;try{for(var r,a=t[Symbol.iterator]();!(e=(r=a.next()).done);e=!0){var o=r.value,s=["day"];o.isSelected&&s.push("is-selected");var l=$('\n        <li data-day="'+o.datetime+'" class="'+s.join(" ")+'">\n          <div class="daypicker-day">'+o.day+'</div>\n          <div class="daypicker-weekday">'+o.weekday+"</div>\n        </li>\n      ");o.hasAppointment&&l.addClass("has-appointment"),this.$day.append(l)}}catch(t){n=!0,i=t}finally{try{!e&&a.return&&a.return()}finally{if(n)throw i}}}},{key:"initMonthPicker",value:function(){$(window).on("load",function(){var t=function(t,e){this.year=e.selectedYear,this.month=e.selectedMonth,this.day=parseInt(e.selectedDay),this.update()}.bind(this),e=function(t){var e=t.toISOString().slice(0,10);return this.daysWithAppointments.indexOf(e)>=0?[!0,"ui-has-appointments",""]:[!0,"",""]}.bind(this);this.$datePicker.datepicker({onSelect:t,beforeShowDay:e}),this.$datePicker3.datepicker({numberOfMonths:3,onSelect:t,beforeShowDay:e}),this.update()}.bind(this))}},{key:"onDayClick",value:function(t){t.preventDefault();var e=t.target;"LI"!==e.tagName&&(e=e.parentElement);var n=new Date(e.getAttribute("data-day"));this.year=n.getFullYear(),this.month=n.getMonth(),this.day=n.getDate(),this.$currentPicker.datepicker("setDate",n),this.update()}}]),t}();e.default=s},function(t,e,n){n(2),n(3),n(4),t.exports=n(5)},function(t,e,n){t.exports=n.p+"agenda_icon.png"},function(t,e,n){t.exports=n.p+"compromisso_icon.png"},function(t,e){},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(6),a=i(r),o=n(7),s=i(o);jQuery.prototype[Symbol.iterator]=Array.prototype[Symbol.iterator],$(function(){var t=!0,e=!1,n=void 0;try{for(var i,r=$(".agenda-tile")[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){var o=i.value;new a.default(o)}}catch(t){e=!0,n=t}finally{try{!t&&r.return&&r.return()}finally{if(e)throw n}}var l=!0,c=!1,u=void 0;try{for(var d,h=$(".dados-agenda")[Symbol.iterator]();!(l=(d=h.next()).done);l=!0){var p=d.value;new s.default(p)}}catch(t){c=!0,u=t}finally{try{!l&&h.return&&h.return()}finally{if(c)throw u}}}),e.default={AgendaTile:a.default,AgendaView:s.default}},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){var n=[],i=!0,r=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(i=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);i=!0);}catch(t){r=!0,a=t}finally{try{!i&&s.return&&s.return()}finally{if(r)throw a}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=n(0),s=function(t){return t&&t.__esModule?t:{default:t}}(o),l=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return(Array(e).fill("0").join("")+t).slice(-1*e)},c=function(){function t(e){i(this,t),this.tile=e,this.pageSize=3,this.datepicker=new s.default(this.tile,this.onDateChange.bind(this)),this.initSwiper(),this.$(".is-now").append('<div class="now">Agora</div>')}return a(t,[{key:"$",value:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(t){return $(t,this.tile)})},{key:"extractTime",value:function(t){var e=t.split("T"),n=r(e,2),i=n[1],a=i.split(":"),o=r(a,2),s=o[0],c=o[1];return l(s)+"h"+l(c)}},{key:"onDateChange",value:function(t){this.swiper.removeAllSlides();var e=$('<div class="swiper-slide"></div>');if(!1===t.hasAppointment)return e.addClass("no-events"),e.html("Sem compromissos oficiais."),void this.swiper.appendSlide(e);var n=!0,i=!1,r=void 0;try{for(var a,o=t.items[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;e.children().length===this.pageSize&&(this.swiper.appendSlide(e),e=$('<div class="swiper-slide"></div>'));var l=$('\n        <div class="collection-events-item">\n          <a class="title-item" href="'+s.href+'">'+s.title+"</a>"+(null==s.location?"":'<div class="location-item">\n            <span class="location">'+s.location+"</span>\n          </div>")+'<div class="timestamp-cell">\n            <span class="timestamp">\n              '+s.start+"\n            </span>\n          </div>\n        </div>\n      ");s.isNow&&($(".timestamp-cell",l).addClass("is-now"),$(".timestamp-cell",l).append('<div class="now">Agora</div>')),e.append(l)}}catch(t){i=!0,r=t}finally{try{!n&&o.return&&o.return()}finally{if(i)throw r}}e.children().length>0&&this.swiper.appendSlide(e)}},{key:"initSwiper",value:function(){this.swiper=new Swiper("#"+this.tile.id+" .collection-events",{navigation:{nextEl:"#"+this.tile.id+" .collection-events .swiper-button-next",prevEl:"#"+this.tile.id+" .collection-events .swiper-button-prev"},pagination:{el:"#"+this.tile.id+" .collection-events .swiper-pagination",clickable:!0}})}}]),t}();e.default=c},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){var n=[],i=!0,r=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(i=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);i=!0);}catch(t){r=!0,a=t}finally{try{!i&&s.return&&s.return()}finally{if(r)throw a}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=n(0),s=function(t){return t&&t.__esModule?t:{default:t}}(o),l=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return(Array(e).fill("0").join("")+t).slice(-1*e)},c=function(){function t(e){i(this,t),this.container=e,this.datepicker=new s.default(e,this.onDateChange.bind(this),!0),this.$appointments=this.$(".list-compromissos"),this.editable="True"===e.dataset.editable}return a(t,[{key:"$",value:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(t){return $(t,this.container.parentElement)})},{key:"extractTime",value:function(t){var e=t.split("T"),n=r(e,2),i=n[1],a=i.split(":"),o=r(a,2),s=o[0],c=o[1];return l(s)+"h"+l(c)}},{key:"onDateChange",value:function(t){var e=void 0,n=void 0;if(this.$appointments.html(""),!1===t.hasAppointment)return void this.$appointments.append('\n        <li class="sem-compromisso item-compromisso">\n          <span>Atualmente não existem compromissos agendados.</span>\n        </li>\n      ');var i=!0,r=!1,a=void 0;try{for(var o,s=t.items[Symbol.iterator]();!(i=(o=s.next()).done);i=!0){var l=o.value;e=$('\n        <li class="item-compromisso-wrapper">\n          <div class="item-compromisso">\n            <div class="compromisso-horarios">\n              <time class="horario compromisso-inicio"\n                    datetime="'+l.datetime+'">\n                '+l.start+'\n              </time>\n            </div>\n            <div class="compromisso-dados">\n              <h4 class="compromisso-titulo">'+l.title+"</h4>"+(null==l.location?"":'<p class="compromisso-local">'+l.location+"</p>")+'<span class="download-compromisso">\n                <a class="add-agenda vcal" href="'+l.href+'/vcal_view">VCAL</a>\n                <span>Adicionar ao meu calendário</span>\n              </span>\n            </div>\n          </div>\n        </li>\n      '),this.editable&&(n=$('\n          <ul class="compromisso-acoes">\n            <li class="compromisso-acao">\n              <a class="compromisso editar_compromisso acao" href="'+l.href+'/edit">Editar</a>\n            </li>\n            <li class="compromisso-acao">\n              <a class="compromisso remover_compromisso acao" href="'+l.href+'/delete_confirmation">Remover</a>\n            </li>\n          </ul>\n        '),$(".editar_compromisso",n).prepOverlay({subtype:"ajax",filter:common_content_filter,formselector:"#form",cssclass:"overlay-compromisso",noform:function(t){return $.plonepopups.noformerrorshow(t,"redirect")},redirect:location.href,closeselector:'[name="form.buttons.cancel"]',width:"50%"}),$(".remover_compromisso",n).prepOverlay({subtype:"ajax",filter:common_content_filter,formselector:"#delete_confirmation",cssclass:"overlay-compromisso",noform:function(t){return $.plonepopups.noformerrorshow(t,"redirect")},redirect:location.href,closeselector:'[name="form.button.Cancel"]',width:"50%"}),$(".item-compromisso",e).append(n)),l.isNow&&$(".compromisso-horarios",e).append('<div class="now">Agora</div>'),this.$appointments.append(e)}}catch(t){r=!0,a=t}finally{try{!i&&s.return&&s.return()}finally{if(r)throw a}}}}]),t}();e.default=c}])});
//# sourceMappingURL=brasilgovagenda.js.map